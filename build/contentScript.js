!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="732f62d5-8c3c-4af4-93cf-d14890d46a6e",t._sentryDebugIdIdentifier="sentry-dbid-732f62d5-8c3c-4af4-93cf-d14890d46a6e")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1b9406aeb2cff4e7945c2ce20b9279cca26d2b17"},(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i,a=function(){return t=function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;this.videos=new Set,this.videoPositions=new Map,this._currentMainVideo=null,this._currentMainVideoWrapper=null,this._currentMainVideoWrapperSelector=null,this._currentMainVideoInViewport=!1,this.intersectionObserver=null,this.mutationObserver=null,this.checkTimeout=null,this.eventListeners={},this.mainVideoEventListeners={},this._initialized=!1,t.instance=this},n=[{key:"init",value:function(){var t=this;document.body?this.initializeTracker():window.addEventListener("DOMContentLoaded",(function(){return t.initializeTracker()}))}},{key:"initializeTracker",value:function(){this._initialized||(this.setupMutationObserver(),this.setupIntersectionObserver(),this.findAllVideos(),this.setupVideoListeners(),window.addEventListener("scroll",this.throttle(this.checkMainVideo.bind(this),200)),this.checkMainVideo(),this._initialized=!0,this.emit("initialized"))}},{key:"findAllVideos",value:function(){var t=this;document.querySelectorAll("video").forEach((function(e){return t.addVideo(e)}))}},{key:"setupIntersectionObserver",value:function(){var t=this;this.intersectionObserver=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(e.target===t._currentMainVideo&&(t._currentMainVideoInViewport=!0,t.emit("mainVideoIntersecting",e.target)),t.checkMainVideo()):e.target===t._currentMainVideo&&(t._currentMainVideoInViewport=!1,t.emit("mainVideoNotIntersecting",e.target))}))}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"setupVideoListeners",value:function(){var t=this;this.videos.forEach((function(e){return t.addVideoListeners(e)}))}},{key:"addVideoListeners",value:function(t){var e=this;if(!t._videoEventListeners){var n={play:function(){return e.checkMainVideo()},pause:function(){return e.checkMainVideo()},ended:function(){return e.handleVideoEnded(t)},error:function(n){return e.handleVideoError(t,n)}};t._videoEventListeners=n,Object.keys(n).forEach((function(e){t.addEventListener(e,n[e])}))}}},{key:"handleVideoEnded",value:function(t){var e=this;this.emit("videoEnded",t),this.checkTimeout&&clearTimeout(this.checkTimeout),this.checkTimeout=setTimeout((function(){e.checkMainVideo()}),3e3)}},{key:"handleVideoError",value:function(t,e){this.emit("videoError",{video:t,error:e})}},{key:"setupMutationObserver",value:function(){var t=this;this.mutationObserver=new MutationObserver((function(e){var n=!1;e.forEach((function(e){"childList"===e.type?(e.addedNodes.forEach((function(e){"VIDEO"===e.nodeName?(t.addVideo(e),n=!0):e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("video").forEach((function(e){t.addVideo(e),n=!0}))})),e.removedNodes.forEach((function(e){"VIDEO"===e.nodeName?(t.removeVideo(e),n=!0):e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("video").forEach((function(e){t.removeVideo(e),n=!0}))}))):"attributes"===e.type&&"VIDEO"===e.target.nodeName&&"src"===e.attributeName&&(t.handleVideoSourceChange(e.target),n=!0)})),n&&t.checkMainVideo()})),document.body&&this.mutationObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})}},{key:"handleVideoSourceChange",value:function(t){t.src||this.videos.delete(t),t.src&&this.addVideo(t),this.checkMainVideo(),this.emit("videoSourceChanged",t)}},{key:"addVideo",value:function(t){t.duration&&t.duration<=5||this.videos.has(t)||(this.videos.add(t),this.intersectionObserver.observe(t),this.addVideoListeners(t),this.saveVideoPosition(t),this.emit("videoAdded",t))}},{key:"removeVideo",value:function(t){this.videos.has(t)&&(this.videos.delete(t),this.intersectionObserver.unobserve(t),t._videoEventListeners&&(Object.keys(t._videoEventListeners).forEach((function(e){t.removeEventListener(e,t._videoEventListeners[e])})),delete t._videoEventListeners),this.emit("videoRemoved",t),this._currentMainVideo===t&&(this._currentMainVideo=null,this._currentMainVideoInViewport=!1,this.checkMainVideo()))}},{key:"saveVideoPosition",value:function(t){var e=t.parentElement,n=Array.from(e.children).indexOf(t);this.videoPositions.set(t,{parent:e,index:n})}},{key:"restoreVideoPosition",value:function(t){var e=this.videoPositions.get(t);if(e){var n=e.parent,r=e.index,o=Array.from(n.children);r>=o.length?n.appendChild(t):n.insertBefore(t,o[r])}}},{key:"checkMainVideo",value:function(){var t,n=0,r=null,o=e(this.videos);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(!i.paused&&!i.ended){var a=this.getVisibleArea(i.getBoundingClientRect());a>n&&(n=a,r=i)}}}catch(t){o.e(t)}finally{o.f()}if(r&&r!==this._currentMainVideo){var c=this._currentMainVideo;this._currentMainVideo=r,this._currentMainVideoWrapper=this.findVideoWrapper(r),this._currentMainVideoWrapperSelector=this.findVideoWrapperSelector(r),this._currentMainVideoInViewport=this.isInViewport(r),this.emit("mainVideoChanged",{previous:c,current:r}),this.setupMainVideoListeners(r)}else r||(this._currentMainVideoInViewport=!1)}},{key:"findVideoWrapper",value:function(t){return t.parentElement}},{key:"findVideoWrapperSelector",value:function(t){var n=t.parentElement;if(!n)return null;var r="";if(n.id)r="#".concat(CSS.escape(n.id));else{r=n.tagName.toLowerCase(),n.className&&(r+=n.className.split(" ").filter((function(t){return""!==t.trim()})).map((function(t){return".".concat(CSS.escape(t))})).join(""));var o=Array.from(n.parentNode.children),i=o.indexOf(n)+1;(i>1||o.length>1)&&(r+=":nth-child(".concat(i,")"))}var a,c=e(n.attributes);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.name.startsWith("data-")&&(r+="[".concat(u.name,'="').concat(CSS.escape(u.value),'"]'))}}catch(t){c.e(t)}finally{c.f()}return r}},{key:"setupMainVideoListeners",value:function(t){var e=this;if(t){this.removeMainVideoListeners(t);var n=function(t,n){return e.emit("mainVideoUpdated",t,n)};this.mainVideoEventListeners={play:function(){e.emit("mainVideoPlay",t),n("mainVideoPlay",t)},pause:function(){e.emit("mainVideoPause",t),n("mainVideoPause",t)},ended:function(){e.emit("mainVideoEnded",t),n("mainVideoEnded",t)},timeupdate:function(){e.emit("mainVideoTimeUpdate",t),n("mainVideoTimeUpdate",t)},volumechange:function(){e.emit("mainVideoVolumeChange",t),n("mainVideoVolumeChange",t)},ratechange:function(){e.emit("mainVideoRateChange",t),n("mainVideoRateChange",t)},seeked:function(){e.emit("mainVideoSeeked",t),n("mainVideoSeeked",t)},seeking:function(){e.emit("mainVideoSeeking",t),n("mainVideoSeeking",t)},stalled:function(){e.emit("mainVideoStalled",t),n("mainVideoStalled",t)},suspend:function(){e.emit("mainVideoSuspend",t),n("mainVideoSuspend",t)},progress:function(){var n=t.buffered,r=t.duration;if(n.length){var o=n.end(n.length-1)/r*100;e.emit("mainVideoProgress",{video:t,percent:o,readyState:t.readyState})}}},Object.keys(this.mainVideoEventListeners).forEach((function(n){t.addEventListener(n,e.mainVideoEventListeners[n])}))}}},{key:"removeMainVideoListeners",value:function(t){var e=this;t&&this.mainVideoEventListeners&&Object.keys(this.mainVideoEventListeners).forEach((function(n){t.removeEventListener(n,e.mainVideoEventListeners[n])}))}},{key:"getVisibleArea",value:function(t){var e=window.innerHeight,n=Math.max(t.top,0),r=Math.min(t.bottom,e);return Math.max(0,r-n)*t.width}},{key:"isInViewport",value:function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"on",value:function(t,e){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e)}},{key:"off",value:function(t,e){this.eventListeners[t]&&(this.eventListeners[t]=this.eventListeners[t].filter((function(t){return t!==e})))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventListeners[t]&&this.eventListeners[t].forEach((function(t){return t.apply(void 0,n)}))}},{key:"throttle",value:function(t,e){var n;return function(){var r=arguments;n||(t.apply(this,r),n=!0,setTimeout((function(){return n=!1}),e))}}},{key:"currentMainVideo",get:function(){return this._currentMainVideo},set:function(t){var e=this._currentMainVideo;this._currentMainVideo=t,this.emit("mainVideoChanged",{previous:e,current:t})}},{key:"currentMainVideoWrapper",get:function(){return this._currentMainVideoWrapper}},{key:"currentMainVideoWrapperSelector",get:function(){return this._currentMainVideoWrapperSelector}},{key:"currentMainVideoInViewport",get:function(){return this._currentMainVideoInViewport}}],n&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),c=new V(r||[]);return o(a,"_invoke",{value:M(t,n,c)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function b(){}function w(){}function x(){}var k={};d(k,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(T([])));S&&S!==n&&r.call(S,a)&&(k=S);var L=x.prototype=b.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,u){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==c(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,n,r){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=p(e,n,r);if("normal"===s.type){if(o=r.done?y:v,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return w.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},_(P.prototype),d(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(L),d(L,l,"Generator"),d(L,a,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function s(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)}))}}var d=function(){return i||(i=new a).init(),i};function f(){return!!document.pictureInPictureElement&&(document.exitPictureInPicture(),!0)}function p(){return h.apply(this,arguments)}function h(){return(h=l(u().mark((function t(){var e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.userActivation.isActive,null!==(n=null===(e=d())||void 0===e?void 0:e.currentMainVideo)&&!0!==(null==n?void 0:n.paused)&&!0!==(null==n?void 0:n.muted)){t.next=5;break}return t.abrupt("return",!1);case 5:if(!n){t.next=17;break}if(n.hasAttribute("disablePictureInPicture")&&n.removeAttribute("disablePictureInPicture"),!document.pictureInPictureElement){t.next=9;break}return t.abrupt("return",!1);case 9:return t.prev=9,t.next=12,n.requestPictureInPicture();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9);case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[9,14]])})))).apply(this,arguments)}function v(){for(var t={},e=0;e<localStorage.length;e++){var n=localStorage.key(e),r=localStorage.getItem(n);t[n]=r}return t}function m(){for(var t={},e=0;e<sessionStorage.length;e++){var n=sessionStorage.key(e),r=sessionStorage.getItem(n);t[n]=r}return t}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),c=new V(r||[]);return o(a,"_invoke",{value:M(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function b(){}function w(){}function x(){}var k={};s(k,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(T([])));S&&S!==n&&r.call(S,a)&&(k=S);var L=x.prototype=b.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==y(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return w.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=s(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},_(P.prototype),s(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function b(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){b(i,r,o,a,c,"next",t)}function c(t){b(i,r,o,a,c,"throw",t)}a(void 0)}))}}var x=[/Could not establish connection. Receiving end does not exist/,/The message port closed before a response was received/,/A listener indicated an asynchronous response by returning true/],k=function(t){return x.some((function(e){return"string"==typeof e?t.includes(e):e.test(t)}))},E=function(){var t=w(g().mark((function t(e){var n,r,o,i,a=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,o=a.length>3?a[3]:void 0,t.prev=3,t.next=6,chrome.runtime.sendMessage({action:e,data:n,from:r,target:o});case 6:return i=t.sent,t.abrupt("return",i);case 10:return t.prev=10,t.t0=t.catch(3),k(t.t0.message),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */L=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new V(r||[]);return o(a,"_invoke",{value:M(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(T([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==S(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(S(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},_(P.prototype),s(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function _(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_(i,r,o,a,c,"next",t)}function c(t){_(i,r,o,a,c,"throw",t)}a(void 0)}))}}function M(){if(!document.getElementById("sidepanel-ball-container")){var t=function(t){var e=s+t.clientY-u,n=window.innerHeight-r.clientHeight;e>=0&&e<=n&&(r.style.top=e+"px")},e=function(){var n=r.offsetTop/window.innerHeight*100+"%";localStorage.setItem("sidepanelBallTopPercent",n),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)},n=function(){document.fullscreenElement||setTimeout((function(){a(),setTimeout((function(){c()}),2e3)}),1e3)},r=document.createElement("div");r.id="sidepanel-ball-container",r.style.position="fixed",r.style.top="30%",r.style.right="0px",r.style.zIndex="2147483647";var o=document.createElement("div");o.id="fab",o.style.width="32px",o.style.height="32px",o.style.backgroundColor="#ff4081",o.style.borderRadius="32px 0 0 32px",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="flex-start",o.style.boxShadow="0px 3px 5px rgba(0,0,0,0.3)",o.style.cursor="pointer",o.style.transition="transform 0.3s",o.style.opacity="0.1";var i=document.createElement("div");i.id="fab-icon",i.style.width="24px",i.style.height="24px",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.margin="0 8px",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#FFF"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm540-453h100v-107H700v107Zm0 186h100v-106H700v106ZM160-240h460v-480H160v480Zm540 0h100v-107H700v107Z"/></svg>',o.appendChild(i),r.appendChild(o),document.body.appendChild(r);var a=function(){o.style.width="54px",o.style.transition="width 0.2s",setTimeout((function(){o.style.opacity="1"}),300)},c=function(){o.style.width="32px",o.style.transition="width 0.2s",o.style.opacity="0.3"};setTimeout((function(){c()}),1500),o.addEventListener("mouseenter",a),o.addEventListener("mouseleave",c),o.addEventListener("click",P(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.style.transform="scale(1)",gr(),r.remove();case 3:case"end":return t.stop()}}),t)}))));var u,s,l=localStorage.getItem("sidepanelBallTopPercent");null!==l&&(r.style.top=l),o.addEventListener("mousedown",(function(n){u=n.clientY,s=r.offsetTop,document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)})),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)})),document.removeEventListener("fullscreenchange",n),document.addEventListener("fullscreenchange",n)}}function j(){var t=document.getElementById("sidepanel-ball-container");t&&t.remove()}const C=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const O="object"==typeof global&&global&&global.Object===Object&&global;var V="object"==typeof self&&self&&self.Object===Object&&self;const T=O||V||Function("return this")();const I=function(){return T.Date.now()};var q=/\s/;const A=function(t){for(var e=t.length;e--&&q.test(t.charAt(e)););return e};var N=/^\s+/;const F=function(t){return t?t.slice(0,A(t)+1).replace(N,""):t};const B=T.Symbol;var R=Object.prototype,H=R.hasOwnProperty,W=R.toString,D=B?B.toStringTag:void 0;const G=function(t){var e=H.call(t,D),n=t[D];try{t[D]=void 0;var r=!0}catch(t){}var o=W.call(t);return r&&(e?t[D]=n:delete t[D]),o};var z=Object.prototype.toString;const U=function(t){return z.call(t)};var Z=B?B.toStringTag:void 0;const Y=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Z&&Z in Object(t)?G(t):U(t)};const K=function(t){return null!=t&&"object"==typeof t};const J=function(t){return"symbol"==typeof t||K(t)&&"[object Symbol]"==Y(t)};var $=/^[-+]0x[0-9a-f]+$/i,X=/^0b[01]+$/i,Q=/^0o[0-7]+$/i,tt=parseInt;const et=function(t){if("number"==typeof t)return t;if(J(t))return NaN;if(C(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=C(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=F(t);var n=X.test(t);return n||Q.test(t)?tt(t.slice(2),n?2:8):$.test(t)?NaN:+t};var nt=Math.max,rt=Math.min;const ot=function(t,e,n){var r,o,i,a,c,u,s=0,l=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,i=o;return r=o=void 0,s=e,a=t.apply(i,n)}function h(t){var n=t-u;return void 0===u||n>=e||n<0||d&&t-s>=i}function v(){var t=I();if(h(t))return m(t);c=setTimeout(v,function(t){var n=e-(t-u);return d?rt(n,i-(t-s)):n}(t))}function m(t){return c=void 0,f&&r?p(t):(r=o=void 0,a)}function y(){var t=I(),n=h(t);if(r=arguments,o=this,u=t,n){if(void 0===c)return function(t){return s=t,c=setTimeout(v,e),l?p(t):a}(u);if(d)return clearTimeout(c),c=setTimeout(v,e),p(u)}return void 0===c&&(c=setTimeout(v,e)),a}return e=et(e)||0,C(n)&&(l=!!n.leading,i=(d="maxWait"in n)?nt(et(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==c&&clearTimeout(c),s=0,r=u=o=c=void 0},y.flush=function(){return void 0===c?a:m(I())},y};var it=function(t){if(null==t)return"00:00";var e=Number(t);if(isNaN(e)||e<0)return"00:00";if(e===1/0||t>86400)return"∞";var n=Math.floor(e),r=Math.floor(n/3600),o=Math.floor(n%3600/60),i=n%60;return r>0?"".concat(String(r).padStart(2,"0"),":").concat(String(o).padStart(2,"0"),":").concat(String(i).padStart(2,"0")):"".concat(String(o).padStart(2,"0"),":").concat(String(i).padStart(2,"0"))};function at(t){var e=t.getBoundingClientRect();if(e.width<200||e.height<200||e.width>e.height&&e.height/e.width>2.4)return!1;var n=e.right>=.75*window.innerWidth&&e.bottom>=.75*window.innerHeight,r=e.width*e.height<=window.innerWidth*window.innerHeight*.25;return(!n||!r)&&!!(t.duration>=10||t.duration===1/0||isNaN(t.duration))}var ct=function(t,e,n){t.removeEventListener(e,n),t.addEventListener(e,n)},ut=new Map;function st(t){var e=t.parentElement,n=Array.from(e.children).indexOf(t);ut.set(t,{parent:e,index:n})}function lt(t){var e=ut.get(t);if(e){var n=e.parent,r=e.index,o=Array.from(n.children);r>=o.length?n.appendChild(t):n.insertBefore(t,o[r])}}function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ft(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ft=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:_(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==dt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(dt(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new L(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function pt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ht(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){pt(i,r,o,a,c,"next",t)}function c(t){pt(i,r,o,a,c,"throw",t)}a(void 0)}))}}var vt=null,mt=function(){var t=ht(ft().mark((function t(){var e,n,r,o,i,a=arguments;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:5,!(r=null===(e=documentPictureInPicture.window)||void 0===e?void 0:e.document.querySelector("video"))){t.next=4;break}return t.abrupt("return",r);case 4:if(!(i=(o=function(){return Array.from(document.querySelectorAll("video,smp-toucan-player")).filter((function(t){return 0!==t.readyState&&at(t)})).sort((function(t,e){if(t.duration&&e.duration&&t.duration!==e.duration)return e.duration-t.duration;var n=t.getClientRects()[0]||{width:0,height:0},r=e.getClientRects()[0]||{width:0,height:0};return r.width*r.height-n.width*n.height}))[0]||null})())){t.next=8;break}return t.abrupt("return",i);case 8:return t.abrupt("return",new Promise((function(t){var e=0,r=setInterval((function(){((i=o())||e>=10*n)&&(clearInterval(r),t(i)),e++}),100)})));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function yt(){return"documentPictureInPicture"in window&&null!==documentPictureInPicture.window}function gt(){try{E("page_picture_in_picture",{pipOn:null!==document.pictureInPictureElement||yt(),pipSupport:!0===("pictureInPictureEnabled"in document&&document.pictureInPictureEnabled)})}catch(t){}}var bt=ot((function(t,e){return wt(t,e)}),250),wt=function(){var t=ht(ft().mark((function t(e,n){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,!(null!=lr&&lr.enableProgressBar&&null!=lr&&lr.playingProgressBar&&pr)){t.next=6;break}return t.next=6,E("playing_timeupdate",{from:n,loop:e.loop,isUsableVideo:at(e),isCurrentVideo:vt===e,duration:Mt()?jt():e.duration,currentTime:Math.floor(e.currentTime),paused:e.paused,ended:e.ended,volume:e.volume,muted:e.muted,playbackRate:e.playbackRate,progress:(e.currentTime/(Mt()?jt()||e.currentTime:e.duration)*100).toFixed(2)});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}(),xt=function(){var t=ht(ft().mark((function t(e){var n;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Pt()){t.next=3;break}return window.postMessage({action:"play_video"},"https://www.netflix.com"),t.abrupt("return");case 3:if(t.t0=e,t.t0){t.next=8;break}return t.next=7,mt();case 7:t.t0=t.sent;case 8:null==(n=t.t0)||n.play(),wt(n,"playVideo");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),kt=function(){var t=ht(ft().mark((function t(e){var n;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Pt()){t.next=3;break}return window.postMessage({action:"pause_video"},"https://www.netflix.com"),t.abrupt("return");case 3:if(t.t0=e,t.t0){t.next=8;break}return t.next=7,mt();case 7:t.t0=t.sent;case 8:null==(n=t.t0)||n.pause(),wt(n,"pauseVideo");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Et=function(){var t=ht(ft().mark((function t(e,n){var r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Pt()){t.next=3;break}return window.postMessage({action:"seek_video",position:1e3*e},"https://www.netflix.com"),t.abrupt("return");case 3:if(t.t0=n,t.t0){t.next=8;break}return t.next=7,mt();case 7:t.t0=t.sent;case 8:(r=t.t0)&&(r.fastSeek?r.fastSeek(e):r.currentTime=e,wt(r,"seekVideo"));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),St=function(){var t=ht(ft().mark((function t(e,n){var r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Pt()){t.next=3;break}return window.postMessage({action:"volume_video",vol:e},"https://www.netflix.com"),t.abrupt("return");case 3:if(t.t0=n,t.t0){t.next=8;break}return t.next=7,mt();case 7:t.t0=t.sent;case 8:(r=t.t0)&&(r.volume=e,wt(r,"volumeChange"));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Lt=function(){var t=ht(ft().mark((function t(e,n){var r;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,t.t0){t.next=5;break}return t.next=4,mt();case 4:t.t0=t.sent;case 5:(r=t.t0)&&(r.playbackRate=e,wt(r,"playbackRateChange"));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),_t=function(){var t=ht(ft().mark((function t(e){var n;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,mt();case 4:t.t0=t.sent;case 5:(n=t.t0)&&(n.muted=!n.muted,wt(n,"switchMute"),setTimeout((function(){!1!==n.muted&&0===n.volume&&(n.volume=.1)}),1e3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Pt(){return window.location.href.includes("netflix.com")}function Mt(){return window.location.href.includes("disneyplus.com")}function jt(){var t;return Math.floor(null===(t=document.querySelector(".controls__footer__progressWrapper.display-flex > div.progress-bar > div"))||void 0===t?void 0:t.getAttribute("aria-valuemax"))}function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Ot(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ot=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:_(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ct(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ct(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new L(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function Vt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Tt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Vt(i,r,o,a,c,"next",t)}function c(t){Vt(i,r,o,a,c,"throw",t)}a(void 0)}))}}var It=null;function qt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;try{if(t===document&&(t=document.documentElement),!(t instanceof HTMLElement))throw new Error("Invalid element provided");It=t;var e=t===document.documentElement||t===document.body,n=e?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop,r=e?Math.max(document.documentElement.scrollHeight,document.body.scrollHeight):t.scrollHeight,o=e?window.innerHeight:t.clientHeight;if(r<=o)return 0;if(r/o<((null==lr?void 0:lr.scrollHeightRatio)||2))return 0;var i=n/(r-o)*100;return parseFloat(Math.min(Math.max(i,0),100).toFixed(1))}catch(t){return 0}}var At=ot(function(){var t=Tt(Ot().mark((function t(e){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e.target);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),100),Nt=function(){var t=Tt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==hr){t.next=3;break}return t.next=3,Ft();case 3:window.removeEventListener("scroll",At),window.addEventListener("scroll",At,!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Ft(t){return Bt.apply(this,arguments)}function Bt(){return(Bt=Tt(Ot().mark((function t(e){var n;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==lr||!lr.readingProgressBar||null!==vt){t.next=7;break}return n=qt(e),t.next=5,E("page_scrolled",{scrollProgress:n});case 5:t.next=9;break;case 7:return t.next=9,E("page_scrolled",{scrollProgress:0});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}const Rt=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,n)}),e)};const Ht=function(t){return t};const Wt=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Dt=Math.max;const Gt=function(t,e,n){return e=Dt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Dt(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=r[o];return c[e]=n(a),Wt(t,this,c)}};const zt=function(t){return function(){return t}};const Ut=function(t){if(!C(t))return!1;var e=Y(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const Zt=T["__core-js_shared__"];var Yt,Kt=(Yt=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+Yt:"";const Jt=function(t){return!!Kt&&Kt in t};var $t=Function.prototype.toString;const Xt=function(t){if(null!=t){try{return $t.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var Qt=/^\[object .+?Constructor\]$/,te=Function.prototype,ee=Object.prototype,ne=te.toString,re=ee.hasOwnProperty,oe=RegExp("^"+ne.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ie=function(t){return!(!C(t)||Jt(t))&&(Ut(t)?oe:Qt).test(Xt(t))};const ae=function(t,e){return null==t?void 0:t[e]};const ce=function(t,e){var n=ae(t,e);return ie(n)?n:void 0};const ue=function(){try{var t=ce(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const se=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:zt(e),writable:!0})}:Ht;var le=Date.now;const de=function(t){var e=0,n=0;return function(){var r=le(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(se);const fe=function(t,e){return de(Gt(t,e,Ht),t+"")}((function(t,e,n){return Rt(t,et(e)||0,n)}));var pe=function(t,e,n){if("status"in e)switch(e.status){case"loading":break;case"complete":vr()}},he=function(){var t;null!=dr&&dr.linkSettings?(null===(t=dr.linkOpenOptions)||void 0===t?void 0:t.length)>0?ve(dr.linkOpenOptions):me():me()},ve=function(t){document.querySelectorAll("a").forEach((function(e){if(e.href!==window.location.href){var n=t.find((function(t){try{return new RegExp(t.regex).test(e.href)}catch(n){return e.href.includes(t.regex)}}));n&&(e.setAttribute("link_target_backup",e.getAttribute("target")||""),e.setAttribute("target",n.target))}}))},me=function(){document.querySelectorAll("a[link_target_backup]").forEach((function(t){t.setAttribute("target",t.getAttribute("link_target_backup")),t.removeAttribute("link_target_backup")}))};function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ge(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var be=function(t,e,n){var r=document.createElement("div");return r.innerHTML=e,r.title=chrome.i18n.getMessage(t),Object.assign(r.style,{cursor:"pointer",fontSize:"14px",color:"dark"===lr.theme?"#ccc":"#666",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0",backgroundColor:"transparent",transition:"color 0.3s ease, transform 0.3s ease"}),r.addEventListener("mouseenter",(function(){r.style.color="dark"===lr.theme?"#ff6666":"#ff9999",r.style.transform="scale(1.1)"})),r.addEventListener("mouseleave",(function(){r.style.color="dark"===lr.theme?"#ccc":"#666",r.style.transform="scale(1)"})),r.addEventListener("click",n),r},we=function(){if(lr.sidebarEnabled&&!document.getElementById("customSidebar")){var t="left"===lr.sidebarPosition,e=document.createElement("div");e.id="customSidebar";var n=document.createElement("div");n.id="sidebarHeader",n.innerHTML="<span>".concat(chrome.i18n.getMessage("appShortName"),"</span>"),Object.assign(n.style,{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",backgroundColor:"transparent",color:"dark"===lr.theme?"#fff":"#000",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",zIndex:"10000",cursor:"pointer"});var r=document.createElement("div");Object.assign(r.style,{display:"flex",alignItems:"center",gap:"10px"}),r.appendChild(be("disableSidebar",'<svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="currentColor"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448Z"/></svg>',(function(){return confirm(chrome.i18n.getMessage("disableSidebarAlert"))&&E("disable_sidebar")}))),r.appendChild(be("toggleSidebarPosition",t?'<svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="currentColor"><path d="M800-240v-480h80v480h-80Zm-320 0-57-56 144-144H80v-80h487L424-664l56-56 240 240-240 240Z"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="currentColor"><path d="M160-240H80v-480h80v480Zm320 0L240-480l240-240 56 56-143 144h487v80H393l144 144-57 56Z"/></svg>',(function(){return E("update_sidebar_position",{position:t?"right":"left"})}))),r.appendChild(be("closeSidebar",'<svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="currentColor"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>',(function(){return xe()}))),n.appendChild(r),e.appendChild(n);var o=document.createElement("iframe");o.src=chrome.runtime.getURL("sidebar.html"),o.setAttribute("tabindex","-1"),Object.assign(o.style,{height:"calc(100% - 50px)",width:"100%",border:"none",overflowY:"hidden"}),e.appendChild(o),o.onload=function(){o.contentWindow&&o.contentWindow.postMessage({type:"SIDEBAR_LOADED"},"*"),n.addEventListener("click",(function(){o.contentWindow&&o.contentWindow.postMessage({type:"SIDEBAR_LOADED"},"*")}))},Object.assign(e.style,ge(ge(ge(ge(ge(ge(ge(ge(ge(ge({position:"fixed",top:"0"},t?"left":"right","0"),"height","100%"),"zIndex","99999"),"backgroundColor","dark"===lr.theme?"#222":"rgba(255,255,255,0.75)"),"backdropFilter","blur(15px)"),"color","dark"===lr.theme?"#fff":"#000"),"boxShadow",t?"2px 0 5px rgba(0,0,0,0.1)":"-2px 0 5px rgba(0,0,0,0.1)"),"transition","transform 0.3s ease, width 0.3s ease"),"width",lr.sidebarWidth||"300px"),"transform","translateX(".concat(t?"-100%":"100%",")")));var i=document.createElement("div");Object.assign(i.style,ge(ge(ge(ge(ge(ge({position:"absolute",top:"0"},t?"right":"left","-5px"),"width","10px"),"height","100%"),"cursor","ew-resize"),"backgroundColor","transparent"),"transition","background-color 0.3s ease")),e.appendChild(i);var a,c,u,s=!1,l=!1,d=function(){e.style.transform="translateX(0)",o.contentWindow&&o.contentWindow.postMessage({type:"SIDEBAR_SHOWN"},"*")},f=function(){s||l||(e.style.transform="translateX(".concat(t?"-100%":"100%",")"),o.contentWindow&&o.contentWindow.postMessage({type:"SIDEBAR_HIDDEN"},"*"))},p=function(n){if(l){var r=t?n.clientX-a:a-n.clientX,o=Math.max(45,Math.min(c+r,window.innerWidth/2));e.style.width="".concat(o,"px")}},h=function(){l=!1,document.documentElement.removeEventListener("mousemove",p),document.documentElement.removeEventListener("mouseup",h),i.style.backgroundColor="transparent",e.style.pointerEvents="auto",document.body.style.cursor="default";var t=e.style.width;localStorage.setItem("sidebarWidth",t),E("updateSidebarWidth",{width:t}),s=!1},v=ot(p,10);i.addEventListener("mousedown",(function(t){t.preventDefault(),l=!0,a=t.clientX,c=parseInt(getComputedStyle(e).width,10),document.documentElement.addEventListener("mousemove",v),document.documentElement.addEventListener("mouseup",h),i.style.backgroundColor="rgba(0,0,0,0.1)",e.style.pointerEvents="none",document.body.style.cursor="ew-resize"})),e.addEventListener("mouseenter",(function(){s=!0,clearTimeout(u),u=setTimeout(d,500)})),e.addEventListener("mouseleave",(function(){s=!1,clearTimeout(u),l||f()}));document.addEventListener("mousemove",(function(e){l||((t?e.clientX<=20:e.clientX>=document.body.offsetWidth-20)?d():s||f())})),document.body.appendChild(e),chrome.runtime.onMessage.addListener((function(t){"updateSidebarWidth"===t.action&&(e.style.width=t.data.width)}))}},xe=function(){var t=document.getElementById("customSidebar");t&&t.remove()},ke='<svg width="13" height="13" viewBox="0 0 24 24" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path d="M20 4 8.667 12 20 20z" /><path d="M4 20h2.667V4H4z"/></svg>',Ee='\n    <svg width="13" height="13" viewBox="6 6 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15 12.3301L9 16.6603L9 8L15 12.3301Z" fill="#fff" />\n    </svg>\n',Se='\n    <svg width="13" height="13" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">\n        <path fill="#fff" d="M120.16 45A20.162 20.162 0 0 0 100 65.16v381.68A20.162 20.162 0 0 0 120.16 467h65.68A20.162 20.162 0 0 0 206 446.84V65.16A20.162 20.162 0 0 0 185.84 45h-65.68zm206 0A20.162 20.162 0 0 0 306 65.16v381.68A20.162 20.162 0 0 0 326.16 467h65.68A20.162 20.162 0 0 0 412 446.84V65.16A20.162 20.162 0 0 0 391.84 45h-65.68z"/>\n    </svg>\n',Le='\n<svg width="13" height="13" viewBox="10 10 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path class="ytp-svg-fill" d="M 12,24 20.5,18 12,12 V 24 z M 22,12 v 12 h 2 V 12 h -2 z" fill="#fff" />\n</svg>\n',_e='<svg fill="#FFF" width="13" height="13" viewBox="-0.024 0 0.309 0.309" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg"><path d="M0.125 0.08v0.156c0 0.01 -0.006 0.012 -0.013 0.005l-0.047 -0.047H0.033A0.018 0.018 0 0 1 0.015 0.177V0.14a0.018 0.018 0 0 1 0.018 -0.018h0.032l0.047 -0.047c0.007 -0.007 0.013 -0.005 0.013 0.005m0.118 0.112a0.009 0.009 0 1 1 -0.013 0.013l-0.034 -0.034 -0.034 0.034a0.009 0.009 0 1 1 -0.013 -0.013l0.034 -0.034L0.15 0.125a0.009 0.009 0 0 1 0.013 -0.013L0.196 0.146l0.034 -0.034a0.009 0.009 0 0 1 0.013 0.013l-0.034 0.034z"/></svg>\n',Pe='\n    <svg width="13" height="13" fill="#fff" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path d="M16 7v10M4 17h2.697L14 21.868V2.132L6.697 7H4c-1.103 0-2 .897-2 2v6c0 1.103.897 2 2 2z"/>\n    </svg>\n',Me='\n<svg width="13" height="13" fill="#fff" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M16 21c3.527-1.547 5.999-4.909 5.999-9S19.527 4.547 16 3v2c2.387 1.386 3.999 4.047 3.999 7S18.387 17.614 16 19v2z"/>\n    <path d="M16 7v10c1.225-1.1 2-3.229 2-5s-.775-3.9-2-5zM4 17h2.697L14 21.868V2.132L6.697 7H4c-1.103 0-2 .897-2 2v6c0 1.103.897 2 2 2z"/>\n</svg>\n',je='<svg width="13" height="13" xmlns="http://www.w3.org/2000/svg"><text x="50%" y="50%" font-size="12" fill="#ffffff" text-anchor="middle" dominant-baseline="middle">弾</text></svg>',Ce='<svg width="13" height="13" fill="#fff" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M464 64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM208.1 287.7c2.8-2.5 7.1-2.1 9.2.9l19.5 27.7c1.7 2.4 1.5 5.6-.5 7.7-53.6 56.8-172.8 32.1-172.8-67.9 0-97.3 121.7-119.5 172.5-70.1 2.1 2 2.5 3.2 1 5.7l-17.5 30.5c-1.9 3.1-6.2 4-9.1 1.7-40.8-32-94.6-14.9-94.6 31.2.1 48 51.1 70.5 92.3 32.6zm210.4 0c2.8-2.5 7.1-2.1 9.2.9l19.5 27.7c1.7 2.4 1.5 5.6-.5 7.7-53.5 56.9-172.7 32.1-172.7-67.9 0-97.3 121.7-119.5 172.5-70.1 2.1 2 2.5 3.2 1 5.7L430 222.2c-1.9 3.1-6.2 4-9.1 1.7-40.8-32-94.6-14.9-94.6 31.2 0 48 51 70.5 92.2 32.6z"/></svg>',Oe='<svg width="13" height="13" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18.25 4C20.3211 4 22 5.67893 22 7.75V16.25C22 18.3211 20.3211 20 18.25 20H5.75C3.67893 20 2 18.3211 2 16.25V7.75C2 5.67893 3.67893 4 5.75 4H18.25ZM18.25 5.5H5.75C4.50736 5.5 3.5 6.50736 3.5 7.75V16.25C3.5 17.4926 4.50736 18.5 5.75 18.5H18.25C19.4926 18.5 20.5 17.4926 20.5 16.25V7.75C20.5 6.50736 19.4926 5.5 18.25 5.5ZM18.25 13C18.6642 13 19 13.3358 19 13.75V15C19 16.1046 18.1046 17 17 17H15.75C15.3358 17 15 16.6642 15 16.25C15 15.8358 15.3358 15.5 15.75 15.5H17C17.2761 15.5 17.5 15.2761 17.5 15V13.75C17.5 13.3358 17.8358 13 18.25 13ZM5.75 13C6.16421 13 6.5 13.3358 6.5 13.75V15C6.5 15.2761 6.72386 15.5 7 15.5H8.25C8.66421 15.5 9 15.8358 9 16.25C9 16.6642 8.66421 17 8.25 17H7C5.89543 17 5 16.1046 5 15V13.75C5 13.3358 5.33579 13 5.75 13ZM7 7H8.25C8.66421 7 9 7.33579 9 7.75C9 8.1297 8.71785 8.44349 8.35177 8.49315L8.25 8.5H7C6.75454 8.5 6.55039 8.67688 6.50806 8.91012L6.5 9V10.25C6.5 10.6642 6.16421 11 5.75 11C5.3703 11 5.05651 10.7178 5.00685 10.3518L5 10.25V9C5 7.94564 5.81588 7.08183 6.85074 7.00549L7 7ZM17 7C18.1046 7 19 7.89543 19 9V10.25C19 10.6642 18.6642 11 18.25 11C17.8358 11 17.5 10.6642 17.5 10.25V9C17.5 8.72386 17.2761 8.5 17 8.5H15.75C15.3358 8.5 15 8.16421 15 7.75C15 7.33579 15.3358 7 15.75 7H17Z" fill="#FFF"/>\n</svg>',Ve='\n    <svg fill="#FFF" width="13" height="13" viewBox="0 0 0.39 0.39" xmlns="http://www.w3.org/2000/svg"><path d="M0.101 0.216a0.015 0.015 0 0 0 -0.005 -0.003 0.016 0.016 0 0 0 -0.012 0 0.015 0.015 0 0 0 -0.009 0.009 0.016 0.016 0 1 0 0.03 0 0.016 0.016 0 0 0 -0.003 -0.005M0.219 0.179h0.016a0.016 0.016 0 0 0 0 -0.033h-0.016a0.016 0.016 0 0 0 0 0.033m-0.065 0h0.016a0.016 0.016 0 0 0 0 -0.033h-0.016a0.016 0.016 0 0 0 0 0.033m-0.049 -0.033h-0.016a0.016 0.016 0 0 0 0 0.033h0.016a0.016 0.016 0 0 0 0 -0.033M0.325 0.081H0.065a0.049 0.049 0 0 0 -0.049 0.049v0.13a0.049 0.049 0 0 0 0.049 0.049h0.26a0.049 0.049 0 0 0 0.049 -0.049V0.13a0.049 0.049 0 0 0 -0.049 -0.049m0.016 0.179a0.016 0.016 0 0 1 -0.016 0.016H0.065a0.016 0.016 0 0 1 -0.016 -0.016V0.13a0.016 0.016 0 0 1 0.016 -0.016h0.26a0.016 0.016 0 0 1 0.016 0.016Zm-0.098 -0.049H0.146a0.016 0.016 0 0 0 0 0.033h0.098a0.016 0.016 0 0 0 0 -0.033m0.057 -0.065h-0.016a0.016 0.016 0 0 0 0 0.033h0.016a0.016 0.016 0 0 0 0 -0.033m0.012 0.07a0.016 0.016 0 0 0 -0.005 -0.003 0.016 0.016 0 0 0 -0.012 0 0.015 0.015 0 0 0 -0.005 0.003 0.016 0.016 0 0 0 -0.003 0.005 0.016 0.016 0 1 0 0.031 0.006 0.014 0.014 0 0 0 -0.001 -0.006 0.016 0.016 0 0 0 -0.003 -0.005"/></svg>\n',Te='\n    <svg fill="#FFF" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="60" height="60" viewBox="0 0 38.4 38.4" enable-background="new 0 0 512 512" xml:space="preserve"><g><path d="M19.2 0C8.596 0 0 8.596 0 19.2s8.596 19.2 19.2 19.2 19.2 -8.596 19.2 -19.2S29.804 0 19.2 0m0 35.4c-8.947 0 -16.2 -7.253 -16.2 -16.2S10.253 3 19.2 3s16.2 7.253 16.2 16.2 -7.253 16.2 -16.2 16.2"/><path points="192,336 352,256 192,176 \t" d="M14.4 25.2L26.4 19.2L14.4 13.2Z"/></g></svg>\n';const Ie=function(t){return"number"==typeof t||K(t)&&"[object Number]"==Y(t)};function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function Ae(t){return function(t){if(Array.isArray(t))return ze(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Ge(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,We(r.key),r)}}function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){He(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function He(t,e,n){return(e=We(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(t){var e=function(t,e){if("object"!=qe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qe(e)?e:e+""}function De(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ge(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ge(t,e){if(t){if("string"==typeof t)return ze(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(t,e):void 0}}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ue(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ue=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:_(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==qe(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(qe(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new L(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function Ze(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ye(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ze(i,r,o,a,c,"next",t)}function c(t){Ze(i,r,o,a,c,"throw",t)}a(void 0)}))}}window.addEventListener("DOMContentLoaded",(function(){Qe=window}));var Ke,Je,$e,Xe,Qe=window,tn=null,en=null,nn=!1,rn=!1,on=!1,an=null,cn=function(){var t=Ye(Ue().mark((function t(){var e,n,r,o,i,a,c,u,s,l,d,f,p,h,v,m,y,g,b,w,x,k,S,L,_,P,M,j;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(new Date,an={cssUrls:[],localCss:["css/pip.css"],styles:""},document.querySelector(".video-js")&&an.localCss.push("css/vjs.css"),e=window.location.hostname,n="vertitab-pip-config-".concat(e),!((r=sessionStorage.getItem(n))&&Object.keys(r).length>0)){t.next=9;break}return o=JSON.parse(r),t.abrupt("return",o);case 9:return t.prev=9,t.next=12,E("get_pip_config",{url:window.location.href});case 12:if(!(i=t.sent).success||!i.data){t.next=73;break}if(!Array.isArray(i.data)){t.next=67;break}a=window.location.href,c=De(i.data),t.prev=18,c.s();case 20:if((u=c.n()).done){t.next=57;break}if(s=u.value,"string"!=typeof(l=s.matches)||!new RegExp(l).test(a)){t.next=32;break}return t.next=26,un(s.css,an);case 26:return an=t.sent,d=Re(Re({},an),s),sessionStorage.setItem(n,JSON.stringify(d)),t.abrupt("return",Re(Re({},d),{},{cssUrls:d.cssUrls.filter((function(t){return!t.startsWith("http")}))}));case 32:if(!Array.isArray(l)){t.next=55;break}f=De(l),t.prev=34,f.s();case 36:if((p=f.n()).done){t.next=47;break}if(h=p.value,!new RegExp(h).test(a)){t.next=45;break}return t.next=41,un(s.css,an);case 41:return an=t.sent,v=Re(Re({},an),s),sessionStorage.setItem(n,JSON.stringify(v)),t.abrupt("return",Re(Re({},v),{},{cssUrls:v.cssUrls.filter((function(t){return!t.startsWith("http")}))}));case 45:t.next=36;break;case 47:t.next=52;break;case 49:t.prev=49,t.t0=t.catch(34),f.e(t.t0);case 52:return t.prev=52,f.f(),t.finish(52);case 55:t.next=20;break;case 57:t.next=62;break;case 59:t.prev=59,t.t1=t.catch(18),c.e(t.t1);case 62:return t.prev=62,c.f(),t.finish(62);case 65:t.next=73;break;case 67:return t.next=69,un(i.data.css,an);case 69:return an=t.sent,m=Re(Re({},an),i.data),sessionStorage.setItem(n,JSON.stringify(m)),t.abrupt("return",Re(Re({},m),{},{cssUrls:m.cssUrls.filter((function(t){return!t.startsWith("http")}))}));case 73:t.next=78;break;case 75:t.prev=75,t.t2=t.catch(9);case 78:for(y=!1,g=0,b=[{match:".vjs-text-track-display",nextVideoBtn:".vjs-icon-next-item",supportCaption:!0,captionBtn:"vjs-captions-toggle",captionParent:"video-js.video-js",caption:".vjs-text-track-display"},{match:".jw-captions",supportCaption:!0,supportDanmaku:!1,captionParent:".jw-wrapper",caption:".jw-captions"},{match:".text-track-wrapper>.text-track-cue",supportCaption:!0,supportDanmaku:!1,captionParent:".text-track-wrapper",caption:".text-track-cue"},{match:".aliplayer-danmuku",nextVideoBtn:".vjs-icon-next-item",supportCaption:!0,supportDanmaku:!0,danmakuParent:".aliplayer-danmuku",danmaku:".danmu.container"}];g<b.length;g++)x=b[g],(k=document.querySelector(x.match))&&""!==(null===(w=k.textContent)||void 0===w?void 0:w.trim())&&(an=Re(Re({},an),x),S=k.parentElement||{},L=S.id,_=S.className,P=S.dataset,(M=or(L,_,P))&&(an=Re(Re({},an),{},{captionParent:M})),y=!0);return y||(j=Qn())&&(an=Re(Re(Re({},an),j),{},{isDetect:!0})),an.isJwPlayer=!!document.querySelector(".jwplayer"),t.abrupt("return",Re(Re({},an),{},{cssUrls:an.cssUrls.filter((function(t){return!t.startsWith("http")}))}));case 84:case"end":return t.stop()}}),t,null,[[9,75],[18,59,62,65],[34,49,52,55]])})));return function(){return t.apply(this,arguments)}}(),un=function(){var t=Ye(Ue().mark((function t(e,n){var r,o,i;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=23;break}if(!Array.isArray(e)){t.next=21;break}r=De(e),t.prev=3,r.s();case 5:if((o=r.n()).done){t.next=11;break}return i=o.value,t.next=9,sn(i,n);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:t.next=23;break;case 21:return t.next=23,sn(e,n);case 23:return t.abrupt("return",n);case 25:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n){return t.apply(this,arguments)}}(),sn=function(){var t=Ye(Ue().mark((function t(e,n){var r;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.startsWith("http")){t.next=5;break}return t.next=3,E("http_request",{url:e,method:"get"});case 3:(r=t.sent).success&&r.data&&(n.styles+="\n".concat(r.data));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ln=function(){var t=Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(an&&0!==Object.keys(an).length){t.next=5;break}return t.next=3,cn();case 3:an=t.sent;case 5:return null!=dr&&dr.captionSetting&&null!=dr&&dr.captionSelector&&(null!=dr&&dr.captionSelector&&(an=Re(Re({},an),{},{caption:null==dr?void 0:dr.captionSelector})),null!=dr&&dr.captionParentSelector&&(an=Re(Re({},an),{},{captionParent:null==dr?void 0:dr.captionParentSelector}))),t.abrupt("return",an);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),dn=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.pipWindow=e,this.videoContainer=n,this.mainEl=null,this.feature=r.toLowerCase()},e=[{key:"init",value:(c=Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.config){t.next=4;break}return t.next=3,ln();case 3:this.config=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"hasFeature",value:(a=Ye(Ue().mark((function t(){var e;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return e="support".concat(this.feature.charAt(0).toUpperCase()+this.feature.slice(1)),t.abrupt("return",this.config[e]||this.config[this.feature]&&!!Qe.document.querySelector(this.config[this.feature]));case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"isFeatureOn",value:(i=Ye(Ue().mark((function t(){var e,n,r,o,i,a;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(e="".concat(this.feature,"Status"),!(n=this.config[e])){t.next=14;break}r=Qe.document.querySelector(n.selector),t.t0=n.type,t.next="attr"===t.t0?9:"classList"===t.t0?10:"func"===t.t0?11:"childClass"===t.t0?12:14;break;case 9:return t.abrupt("return",(null==r?void 0:r.getAttribute(n.attrName))===n.attrValue);case 10:return t.abrupt("return",(null==r?void 0:r.classList.contains(n.className))===n.include);case 11:return t.abrupt("return",n.func());case 12:return t.abrupt("return",!(null==r||!r.querySelector('*[class*="'.concat(n.childClassName,'"]')))===n.include);case 14:if("caption"!==this.feature||null==dr||!dr.captionSetting||null==dr||!dr.captionSelector){t.next=16;break}return t.abrupt("return",!0);case 16:if(!an.isDetect||!an[this.feature]){t.next=22;break}if(!(i=Je.document.querySelector(an[this.feature]))||"TRACK"!==i.nodeName){t.next=20;break}return t.abrupt("return",!0);case 20:return a=null===(o=Je.document.querySelector(an[this.feature]))||void 0===o?void 0:o.textContent.trim(),t.abrupt("return",""!==a);case 22:return t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"applyFeature",value:(o=Ye(Ue().mark((function t(){var e,n,r,o,i,a;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.config[this.feature]){t.next=4;break}return t.abrupt("return");case 4:return(n=this.pipWindow.document.querySelector(".".concat(this.feature,"-container")))||((n=this.pipWindow.document.createElement("div")).classList.add("".concat(this.feature,"-container")),this.config.css||n.classList.add("enforce-style"),this.videoContainer.appendChild(n)),t.next=8,Mn(500);case 8:if(this.mainEl=this.config.wrapperSelector?null===(e=en)||void 0===e||null===(e=e.closest(this.config.wrapperSelector))||void 0===e?void 0:e.querySelector(this.config[this.feature]):Qe.document.querySelector(this.config[this.feature]),this.mainEl){if(st(this.mainEl),this.mainEl.style.zIndex=1999,this.config.captionStyle)r=this.mainEl.querySelector("*:not(:has(*))")||this.mainEl,Object.assign(r.style,this.config.captionStyle);else if("caption"===this.feature){for(o=this.mainEl;o.children.length>0;)o=o.children[0];i=window.getComputedStyle(o),a={display:i.display,textAlign:i.textAlign,padding:i.padding,borderRadius:i.borderRadius,direction:i.direction,opacity:i.opacity,color:i.color,background:i.background,backgroundColor:i.backgroundColor},Object.assign(o.style,a)}n.appendChild(this.mainEl)}case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"resetFeature",value:(r=Ye(Ue().mark((function t(){var e;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.mainEl){t.next=6;break}return t.next=3,this.init();case 3:(e=this.config["clean".concat(this.feature.charAt(0).toUpperCase()+this.feature.slice(1))])&&this.mainEl.querySelectorAll(e).forEach((function(t){return t.remove()})),lt(this.mainEl);case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&Fe(t.prototype,e),n&&Fe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i,a,c}();function fn(){return pn.apply(this,arguments)}function pn(){return(pn=Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Je){t.next=2;break}return t.abrupt("return");case 2:return $e=new dn(Je,tn,"danmaku"),Xe=new dn(Je,tn,"caption"),$e.applyFeature(),Xe.applyFeature(),t.abrupt("return",{danmakuInstance:$e,captionInstance:Xe});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function hn(){return vn.apply(this,arguments)}function vn(){return(vn=Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Je){t.next=2;break}return t.abrupt("return");case 2:$e&&$e.resetFeature(),Xe&&Xe.resetFeature();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mn(t,e){t&&(t.innerHTML="",t.innerHTML=e)}var yn=function(){if(!Je)return!1;var t=Je.document.querySelector(".loading-container");return!!t&&t.classList.contains("show")},gn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading...";if(Je){var n=Je.document.querySelector(".loading-container");if(n){var r=n.querySelector(".loading-text");r&&(r.textContent=e),t?n.classList.add("show"):n.classList.remove("show")}}},bn=!1,wn=function(t){if(Je){var e=Je.document.querySelector(".icon-play-container");e&&(t?(e.classList.add("show"),bn=!0):(e.classList.remove("show"),bn=!1))}},xn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e?e+"%":t.value+"%";t.style.setProperty("--litters-range",n)},kn=function(t,e,n){var r=Je.document.querySelector(t);if(r){var o=n.bind(r);r.removeEventListener(e,o),r.addEventListener(e,o)}},En=function(t,e){if(Je){var n="string"==typeof t?Je.document.querySelector(t):t;n&&(n.innerHTML=e)}},Sn=function(){return Je?Je.document.querySelector("video,smp-toucan-player"):null};function Ln(t,e){return _n.apply(this,arguments)}function _n(){return _n=Ye(Ue().mark((function t(e,n){var r,o,i,a,c,u,s,l,d,f,p,h,v,m,y,g,b,w;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}return t.abrupt("return");case 2:return r=Sn(),t.next=5,ln();case 5:if(o=t.sent,i=o.prevVideoBtn?Qe.document.querySelector(o.prevVideoBtn):null,a=o.nextVideoBtn?Qe.document.querySelector(o.nextVideoBtn):null,e.document.querySelector("#player-control-container")){t.next=50;break}return(f=e.document.createElement("div")).id="player-control-container",t.t0=mn,t.t1=f,t.t3='\n            <div class="controls">\n                <div class="control-row">\n                    <input id="videoPlayingProgress" type="range" min="0" max="100" step="0.1" value="0" />\n                </div>\n                <div class="control-row second-row">\n                    '.concat(i?'<div class="control-group control-group-next">\n                        <button data-action="prev" title="'.concat(chrome.i18n.getMessage("prev_video"),'">\n                            ').concat(ke,"\n                        </button>\n                    </div>"):"",'\n                    <div class="control-group">\n                        <button data-action="play" title="').concat(chrome.i18n.getMessage("play")," / ").concat(chrome.i18n.getMessage("pause"),'">\n                            ').concat(null!==(c=r)&&void 0!==c&&c.paused?Ee:Se,"\n                        </button>\n                    </div>\n                    ").concat(a?'<div class="control-group control-group-next">\n                        <button data-action="next" title="'.concat(chrome.i18n.getMessage("next_video"),'">\n                            ').concat(Le,"\n                        </button>\n                    </div>"):"",'\n                    <div class="control-group">\n                        <button data-action="mute" title="').concat(chrome.i18n.getMessage("mute")," / ").concat(chrome.i18n.getMessage("unmute"),'" class="pip-unmuted">\n                           ').concat(null!==(u=r)&&void 0!==u&&u.muted?_e:0===(null===(s=r)||void 0===s?void 0:s.volume)?Pe:Me,'\n                        </button>\n                        <input id="videoVolumeProgress" type="range" min="0" max="100" />\n                    </div>\n                    <div class="control-group control-group-time">\n                        <div class="control-time"></div>\n                    </div>\n                    <div class="control-group align-right">\n                        <button data-action="playbackRate" title="').concat(chrome.i18n.getMessage("playbackRate"),'">\n                            <div class="player-ctrl-playbackrate-result">1x</div>\n                        </button>\n                        <ul class="player-ctrl-playbackrate-menu">\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="4">4.0x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="3">3.0x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="2">2.0x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="1.75">1.75x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="1.5">1.5x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="1.25">1.25x</li>\n                            <li class="player-ctrl-playbackrate-menu-item bpx-state-active" data-value="1">1.0x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="0.75">0.75x</li>\n                            <li class="player-ctrl-playbackrate-menu-item" data-value="0.5">0.5x</li>\n                        </ul>\n                    </div>\n                    '),t.next=16,null===(l=$e)||void 0===l?void 0:l.hasFeature();case 16:if(!t.sent){t.next=20;break}t.t4='<div class="control-group">\n                        <button data-action="danmaku" title="'.concat(chrome.i18n.getMessage("danmaku"),'">\n                            ').concat(je,"\n                        </button>\n                    </div>"),t.next=21;break;case 20:t.t4="";case 21:return t.t5=t.t4,t.t2=t.t3.concat.call(t.t3,t.t5,"\n                    "),t.next=25,null===(d=Xe)||void 0===d?void 0:d.hasFeature();case 25:if(!t.sent){t.next=29;break}t.t6='<div class="control-group">\n                        <button data-action="caption" title="'.concat(chrome.i18n.getMessage("subtitles")," / ").concat(chrome.i18n.getMessage("close_captions"),'">\n                            ').concat(Ce,"\n                        </button>\n                    </div>"),t.next=30;break;case 29:t.t6="";case 30:t.t7=t.t6,t.t8=t.t2.concat.call(t.t2,t.t7,'\n                    <div class="control-group">\n                        <button data-action="fit" title="').concat(chrome.i18n.getMessage("fit_to_screen"),'">\n                            ').concat(Oe,'\n                        </button>\n                    </div>\n                      <div class="control-group">\n                        <button data-action="shortcuts" title="').concat(chrome.i18n.getMessage("reload_video"),'">\n                            ').concat(Ve,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        "),(0,t.t0)(t.t1,t.t8),n.append(f),kn('#player-control-container button[data-action="shortcuts"]',"click",(function(t){var n=e.document.querySelector(".player-shortcuts-container");n&&n.classList.toggle("hidden")})),kn('#player-control-container button[data-action="play"]',"click",(function(t){var e=Sn();null!=e&&e.paused?xt(e):kt(e),En(t.target,null!=e&&e.paused?Ee:Se)})),kn('#player-control-container button[data-action="prev"]',"click",Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:on=!0,null==i||i.click(),gn(!0);case 3:case"end":return t.stop()}}),t)})))),kn('#player-control-container button[data-action="next"]',"click",Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:on=!0,null==a||a.click(),gn(!0);case 3:case"end":return t.stop()}}),t)})))),kn('#player-control-container button[data-action="mute"]',"click",(function(t){var n=Sn();_t(n),En(t.target,null!=n&&n.muted?_e:0===(null==n?void 0:n.volume)?Pe:Me);var r=e.document.querySelector("#player-control-container #videoVolumeProgress");r&&(r.value=Math.floor(1e3*(null==n?void 0:n.volume))/10,xn(r))})),kn('#player-control-container button[data-action="fit"]',"click",(function(){var t=Sn();if(e&&t){var n=t.videoWidth,r=t.videoHeight,o=n/r,i=Math.floor(e.innerWidth/o+.5);e.resizeBy(0,i-e.innerHeight);var a=Vn(n,r),c=e.innerWidth;a?localStorage.setItem("pipPortraitWidth",c):localStorage.setItem("pipLandscapeWidth",c)}})),(p=e.document.querySelector("#player-control-container #videoVolumeProgress"))&&(p.value=Math.floor(1e3*(null===(h=r)||void 0===h?void 0:h.volume))/10,xn(p)),kn("#player-control-container #videoVolumeProgress","input",(function(t){var e=Sn();e&&(e.volume=t.target.value/100,xn(t.target),En('#player-control-container button[data-action="mute"]',null!=e&&e.muted?_e:0===(null==e?void 0:e.volume)?Pe:Me))})),(v=e.document.querySelector("#player-control-container #videoPlayingProgress"))&&(b=Mt()?jt()||(null===(m=r)||void 0===m?void 0:m.duration):null===(y=r)||void 0===y?void 0:y.duration,v.value=Math.floor((null===(g=r)||void 0===g?void 0:g.currentTime)/b*1e3)/10,xn(v),v.addEventListener("mousemove",(function(t){var n,r=Sn(),o=(n=t).offsetX/n.target.clientWidth*parseInt(n.target.getAttribute("max"),10),i=Mt()&&jt()||(null==r?void 0:r.duration),a=Math.floor(i*(o/100)),c=e.document.querySelector("#progress-tooltip");c||((c=e.document.createElement("div")).id="progress-tooltip",c.style.position="fixed",c.style.background="#000",c.style.color="#fff",c.style.padding="2px 5px",c.style.borderRadius="3px",c.style.fontSize="10px",c.style.pointerEvents="none",c.style.zIndex="9999",e.document.body.appendChild(c)),c.textContent=it(a);var u=v.getBoundingClientRect(),s=c.getBoundingClientRect(),l=t.clientX-s.width/2;l=Math.max(u.left,Math.min(l,u.right-s.width)),c.style.left="".concat(l,"px"),c.style.top="".concat(u.top-s.height-5,"px")})),v.addEventListener("mouseleave",(function(){var t=e.document.querySelector("#progress-tooltip");t&&t.remove()}))),kn("#player-control-container #videoPlayingProgress","input",(function(t){var e=Sn();if(e&&(null==e?void 0:e.duration)!==1/0&&Ie(null==e?void 0:e.duration)){nn=!0,setTimeout((function(){nn=!1,null!=e&&e.paused&&xt(e)}),5e3);var n=Mt()&&jt()||(null==e?void 0:e.duration),r=Math.round(n*(parseInt(t.target.value,10)/100));gn(!0),xn(t.target,t.target.value),Et(r,e)}})),jn(e,"danmaku"),jn(e,"caption"),On(e),Pn(e);case 50:w=function(t){if(t){var n={play:function(){nn=!1,bn&&wn(!1),gn(!1),En('#player-control-container button[data-action="play"]',this.paused?Ee:Se)},pause:function(){wn(!0),En('#player-control-container button[data-action="play"]',this.paused?Ee:Se)},seeked:function(){nn=!1},progress:function(t){gn(t.target.readyState<3)},ended:function(){null!=lr&&lr.continuousPlayback?rn||(gn(!0),Ke.restoreVideoPosition(this),hn(),setTimeout((function(){}),500)):Hn()},timeupdate:function(){var t=Mt()&&jt()||this.duration;if(!nn){yn()&&t-this.currentTime>=5&&gn(!1),bn&&wn(!1);var n=e.document.querySelector("#player-control-container #videoPlayingProgress");n&&(n.value=Math.floor(this.currentTime/t*1e3)/10,xn(n));var r=e.document.querySelector("#player-control-container .control-time");if(r){var o=it(this.currentTime),i=t&&t!==1/0?"".concat(o," / ").concat(it(t)):"∞";mn(r,"<span>".concat(i,"</span>"))}}},volumechange:function(){En('#player-control-container button[data-action="mute"]',this.muted||0===this.volume?Pe:Me);var t=e.document.querySelector("#player-control-container #videoVolumeProgress");t&&(t.value=Math.floor(1e3*this.volume)/10,xn(t))},ratechange:function(){var t=e.document.querySelector("#player-control-container .player-ctrl-playbackrate-result"),n=(Math.round(4*this.playbackRate)/4).toFixed(2).replace(/\.?0+$/,"");mn(t,"<span>".concat(n,"x</span>"))},dblclick:function(t){t.stopPropagation(),this.paused?this.play():this.pause()}};Object.entries(n).forEach((function(e){var n=Ne(e,2),r=n[0],o=n[1];t.removeEventListener(r,o),t.addEventListener(r,o)}))}},w(r),new MutationObserver((function(t){t.forEach((function(t){if("childList"===t.type){var e=Sn();e&&e!==r&&w(r=e)}}))})).observe(e.document.body,{childList:!0,subtree:!0});case 54:case"end":return t.stop()}}),t)}))),_n.apply(this,arguments)}function Pn(t){ct(t.document,"keydown",(function(e){var n,r,o;e.stopPropagation();var i=Sn();if(i){var a=Mt()&&jt()||i.duration,c=t.document.querySelector(".video-container"),u=t.document.querySelector('#player-control-container button[data-action="next"]'),s=t.document.querySelector('#player-control-container button[data-action="prev"]'),l=10*parseInt(e.code.slice(-1));switch(e.code){case"Space":case"KeyK":i.paused?xt(i):kt(i);break;case"ArrowLeft":gn(!0),Et(Math.max(0,Math.floor(i.currentTime-5)),i);break;case"ArrowRight":gn(!0),Et(Math.min(Math.floor(a),Math.floor(i.currentTime+5)),i);break;case"KeyJ":gn(!0),Et(Math.max(0,Math.floor(i.currentTime-10)),i);break;case"KeyL":gn(!0),Et(Math.min(Math.floor(a),Math.floor(i.currentTime+10)),i);break;case"ArrowUp":St(Math.min(1,i.volume+.05),i);break;case"ArrowDown":St(Math.max(0,i.volume-.05),i);break;case"Escape":Hn();break;case"KeyQ":c&&(c.classList.toggle("hidden"),i.paused?i.play():i.pause());break;case"KeyM":_t(i);break;case"KeyN":e.shiftKey&&(u?u.click():function(){var t={"youtube.com":function(){var t;return null===(t=document.querySelector(".ytp-next-button"))||void 0===t?void 0:t.click()},"netflix.com":function(){var t;return null===(t=document.querySelector(".button-nfplayerNextEpisode"))||void 0===t?void 0:t.click()},"hulu.com":function(){var t;return null===(t=document.querySelector(".next-episode-button"))||void 0===t?void 0:t.click()},"amazon.com":function(){var t;return null===(t=document.querySelector(".atvwebplayersdk-nextvideometadata-button"))||void 0===t?void 0:t.click()},"bilibili.com":function(){var t;return null===(t=document.querySelector(".bilibili-player-video-btn-next,.bpx-player-ending-related-item-countdown"))||void 0===t?void 0:t.click()},"iqiyi.com":function(){var t;return null===(t=document.querySelector(".qy-player-next-btn"))||void 0===t?void 0:t.click()},"youku.com":function(){var t;return null===(t=document.querySelector(".control-next-video"))||void 0===t?void 0:t.click()},"crunchyroll.com":function(){var t;return null===(t=document.querySelector(".episode-next"))||void 0===t?void 0:t.click()},"funimation.com":function(){var t;return null===(t=document.querySelector(".vjs-next-button"))||void 0===t?void 0:t.click()},"vimeo.com":function(){var t;return null===(t=document.querySelector(".vp-nav-button--next"))||void 0===t?void 0:t.click()},"dailymotion.com":function(){var t;return null===(t=document.querySelector(".dmp_ControlBarButton-next"))||void 0===t?void 0:t.click()},"twitch.tv":function(){var t;return null===(t=document.querySelector('[data-a-target="player-theatre-mode-button"]'))||void 0===t?void 0:t.click()},"disneyplus.com":function(){var t;return null===(t=document.querySelector(".up-next__cta-button"))||void 0===t?void 0:t.click()},"hbomax.com":function(){var t;return null===(t=document.querySelector(".next-episode-button"))||void 0===t?void 0:t.click()},"peacocktv.com":function(){var t;return null===(t=document.querySelector(".player-control-button--next-episode"))||void 0===t?void 0:t.click()},"paramountplus.com":function(){var t;return null===(t=document.querySelector(".next-episode-button"))||void 0===t?void 0:t.click()},"discoveryplus.com":function(){var t;return null===(t=document.querySelector(".dplus-player-controls__next-button"))||void 0===t?void 0:t.click()},"apple.com":function(){var t;return null===(t=document.querySelector(".playback-control--next"))||void 0===t?void 0:t.click()},"tiktok.com":function(){var t;return null===(t=document.querySelector(".css-1s9jpf8-ButtonBasicButtonContainer-StyledVideoSwitch"))||void 0===t?void 0:t.click()},"www.kuaishou.com":function(){var t;return null===(t=document.querySelector(".switch-btn.down,.switch-item.video-switch-next"))||void 0===t?void 0:t.click()}},e=Object.keys(t).find((function(t){return window.location.hostname.includes(t)}));if(e)return void t[e]();var n,r=["next","下一个","следующий","nächste","suivant","siguiente","prossimo","próximo","次へ","다음","下一個","berikutnya","tiếp theo","ถัดไป","अगला","التالي","הבא","próximo","nästa","næste","neste","seuraava","następny","další","ďalší","következő","sljedeći","naslednji","следващ","următor","следећи","επόμενο","sonraki","наступний","келесі","кийинки","наступны","следен","следећи","berikut","susunod","seterusnya","next episode","next video"],o=De(document.querySelectorAll("button, div, span, a"));try{var i,a=function(){var t=n.value,e=t.textContent.toLowerCase();if(r.some((function(t){return e.includes(t)})))return t.click(),{v:void 0}};for(o.s();!(n=o.n()).done;)if(i=a())return i.v}catch(t){o.e(t)}finally{o.f()}for(var c=0,u=[".next-button",".next-video",".next-episode",".next",".nextButton",".next_video",".nextVideo",".next_button",".next-episode-button",".nextEpisodeButton",".next_episode",".next-video-button",".nextVideoButton",".next-content-button",".nextContentButton","#next-button","#nextButton","#next_button","#next-video","#nextVideo","#next_video","[data-next-button]",'[data-action="next"]','[aria-label*="Next"]','[title*="Next"]'];c<u.length;c++){var s=u[c],l=document.querySelector(s);if(l)return void l.click()}}());break;case"KeyP":e.shiftKey?s?s.click():function(){var t={"youtube.com":function(){var t;return null===(t=document.querySelector(".ytp-prev-button"))||void 0===t?void 0:t.click()},"netflix.com":function(){var t;return null===(t=document.querySelector(".button-nfplayerPreviousEpisode"))||void 0===t?void 0:t.click()},"hulu.com":function(){var t;return null===(t=document.querySelector(".previous-episode-button"))||void 0===t?void 0:t.click()},"amazon.com":function(){var t;return null===(t=document.querySelector(".atvwebplayersdk-previousvideometadata-button"))||void 0===t?void 0:t.click()},"bilibili.com":function(){var t;return null===(t=document.querySelector(".bilibili-player-video-btn-prev"))||void 0===t?void 0:t.click()},"iqiyi.com":function(){var t;return null===(t=document.querySelector(".qy-player-prev-btn"))||void 0===t?void 0:t.click()},"youku.com":function(){var t;return null===(t=document.querySelector(".control-prev-video"))||void 0===t?void 0:t.click()},"crunchyroll.com":function(){var t;return null===(t=document.querySelector(".episode-prev"))||void 0===t?void 0:t.click()},"funimation.com":function(){var t;return null===(t=document.querySelector(".vjs-prev-button"))||void 0===t?void 0:t.click()},"vimeo.com":function(){var t;return null===(t=document.querySelector(".vp-nav-button--previous"))||void 0===t?void 0:t.click()},"dailymotion.com":function(){var t;return null===(t=document.querySelector(".dmp_ControlBarButton-prev"))||void 0===t?void 0:t.click()},"twitch.tv":function(){var t;return null===(t=document.querySelector('[data-a-target="player-theatre-mode-button"]'))||void 0===t?void 0:t.click()},"disneyplus.com":function(){var t;return null===(t=document.querySelector(".up-prev__cta-button"))||void 0===t?void 0:t.click()},"hbomax.com":function(){var t;return null===(t=document.querySelector(".previous-episode-button"))||void 0===t?void 0:t.click()},"peacocktv.com":function(){var t;return null===(t=document.querySelector(".player-control-button--previous-episode"))||void 0===t?void 0:t.click()},"paramountplus.com":function(){var t;return null===(t=document.querySelector(".previous-episode-button"))||void 0===t?void 0:t.click()},"discoveryplus.com":function(){var t;return null===(t=document.querySelector(".dplus-player-controls__prev-button"))||void 0===t?void 0:t.click()},"apple.com":function(){var t;return null===(t=document.querySelector(".playback-control--previous"))||void 0===t?void 0:t.click()},"tiktok.com":function(){var t;return null===(t=document.querySelector(".css-1s9jpf8-ButtonBasicButtonContainer-StyledVideoSwitch:first-child"))||void 0===t?void 0:t.click()},"www.kuaishou.com":function(){var t;return null===(t=document.querySelector(".switch-btn.up,.switch-item.video-switch-last"))||void 0===t?void 0:t.click()}},e=Object.keys(t).find((function(t){return window.location.hostname.includes(t)}));if(e)return void t[e]();var n,r=["previous","上一个","предыдущий","vorherige","précédent","anterior","precedente","anterior","前へ","이전","上一個","sebelumnya","trước đó","ก่อนหน้า","पिछला","السابق","הקודם","anterior","föregående","forrige","forrige","edellinen","poprzedni","předchozí","predchádzajúci","előző","prethodni","prejšnji","предишен","anterior","претходни","προηγούμενο","önceki","попередній","алдыңғы","мурунку","папярэдні","претходен","претходни","sebelum","nauna","sebelumnya","previous episode","previous video"],o=De(document.querySelectorAll("button, div, span, a"));try{var i,a=function(){var t=n.value,e=t.textContent.toLowerCase();if(r.some((function(t){return e.includes(t)})))return t.click(),{v:void 0}};for(o.s();!(n=o.n()).done;)if(i=a())return i.v}catch(t){o.e(t)}finally{o.f()}for(var c=0,u=[".prev-button",".prev-video",".prev-episode",".prev",".prevButton",".prev_video",".prevVideo",".prev_button",".previous-episode-button",".previousEpisodeButton",".previous_episode",".previous-video-button",".previousVideoButton",".previous-content-button",".previousContentButton","#prev-button","#prevButton","#prev_button","#prev-video","#prevVideo","#prev_video","[data-prev-button]",'[data-action="prev"]','[aria-label*="Previous"]','[title*="Previous"]'];c<u.length;c++){var s=u[c],l=document.querySelector(s);if(l)return void l.click()}}():e.altKey&&Hn();break;case"KeyT":null===(n=t.document.querySelector('#player-control-container button[data-action="fit"]'))||void 0===n||n.click();break;case"KeyC":null===(r=t.document.querySelector('#player-control-container button[data-action="caption"]'))||void 0===r||r.click();break;case"KeyB":null===(o=t.document.querySelector('#player-control-container button[data-action="danmaku"]'))||void 0===o||o.click();break;case"KeyF":Hn(),setTimeout((function(){var t,e=(null===(t=Ke)||void 0===t?void 0:t.currentMainVideo)||document.querySelector("video");e&&e.requestFullscreen&&e.requestFullscreen()}),200);break;case"Period":i&&(i.playbackRate=Math.min(4,i.playbackRate+.25));break;case"Comma":i&&(i.playbackRate=Math.max(.25,i.playbackRate-.25));break;case"Delete":i&&(i.playbackRate=4);break;case"Home":Et(0,i);break;case"End":Et(a,i);break;case"Digit0":case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":Et(a*(l/100),i)}}})),ct(t.document,"wheel",(function(t){t.stopPropagation();var e=Sn();if(e){var n=Mt()&&jt()||e.duration;t.deltaY<0?(gn(!0),Et(Math.max(0,Math.floor(e.currentTime-5)),e)):t.deltaY>0&&(gn(!0),Et(Math.min(Math.floor(n),Math.floor(e.currentTime+5)),e))}}))}function Mn(t){return new Promise((function(e){return setTimeout(e,t)}))}function jn(t,e){return Cn.apply(this,arguments)}function Cn(){return Cn=Ye(Ue().mark((function t(e,n){var r,o,i,a,c,u,s,l;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ln();case 2:if(o=t.sent,n=n.toLowerCase(),i=e.document.querySelector(".".concat(n,"-container")),a=e.document.querySelector('button[data-action="'.concat(n,'"]'))){t.next=8;break}return t.abrupt("return");case 8:if(c="caption"===n?Xe:"danmaku"===n?$e:null){t.next=11;break}return t.abrupt("return");case 11:if(!(u=o.isJwPlayer&&"caption"===n)){t.next=16;break}t.t0=null===(r=e.document.querySelector(".jw-captions"))||void 0===r?void 0:r.classList.contains("jw-captions-enabled"),t.next=19;break;case 16:return t.next=18,c.isFeatureOn();case 18:t.t0=t.sent;case 19:t.t0?(a.classList.add("active"),u?null===(s=e.document.querySelector(".jw-captions"))||void 0===s||s.classList.remove("hidden"):null==i||i.classList.remove("hidden")):(a.classList.remove("active"),u?null===(l=e.document.querySelector(".jw-captions"))||void 0===l||l.classList.add("hidden"):null==i||i.classList.add("hidden")),a.addEventListener("click",(function(){var t;if(o.isJwPlayer&&"caption"===n)null===(t=e.document.querySelector(".jw-captions"))||void 0===t||t.classList.toggle("hidden"),a.classList.toggle("active");else if(o.isDetect&&o[n]){var r;null===(r=e.document.querySelector(o[n]))||void 0===r||r.classList.toggle("hidden"),a.classList.toggle("active"),null==i||i.classList.toggle("hidden")}else{var u,s=o["".concat(n,"Btn")];if(s)null===(u=Qe.document.querySelector(s))||void 0===u||u.click();setTimeout((function(){a.classList.toggle("active"),null==i||i.classList.toggle("hidden"),i&&!i.classList.contains("hidden")&&c.applyFeature()}),200)}}));case 22:case"end":return t.stop()}}),t)}))),Cn.apply(this,arguments)}function On(t){if(t){var e=t.document.querySelector("video,smp-toucan-player"),n=t.document.querySelector('button[data-action="playbackRate"]'),r=t.document.querySelector(".player-ctrl-playbackrate-menu"),o=t.document.querySelector(".player-ctrl-playbackrate-result");n.addEventListener("click",(function(t){t.stopPropagation(),r.style.display="none"===r.style.display?"block":"none"})),r.addEventListener("click",(function(t){if(t.target.classList.contains("player-ctrl-playbackrate-menu-item")){var n=parseFloat(t.target.getAttribute("data-value"));e.playbackRate=n,o.textContent="".concat(n,"x"),r.style.display="none",r.querySelectorAll(".player-ctrl-playbackrate-menu-item").forEach((function(e){e.classList.toggle("bpx-state-active",e===t.target)}))}})),t.document.addEventListener("click",(function(){r.style.display="none"}))}}var Vn=function(t,e){return e>t};function Tn(){return In.apply(this,arguments)}function In(){return In=Ye(Ue().mark((function t(){var e,n,r,o,i,a,c,u,s,l;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("www.tiktok.com"!==location.hostname){t.next=5;break}if(!(n=null===(e=Array.from(document.querySelectorAll("video")).find((function(t){return!t.paused})))||void 0===e||null===(e=e.closest('[class*="DivVideoPlayerContainer"]'))||void 0===e?void 0:e.querySelector('[class*="DivMiniPlayerButtonContainer "]'))){t.next=5;break}return n.click(),t.abrupt("return",!1);case 5:if(!(r=Sn())||null!=r&&r.paused||r.ended){t.next=8;break}return t.abrupt("return",!1);case 8:return Kn(chrome.i18n.getMessage("loading_pip_config"),3e3),t.next=11,ln();case 11:if(!(o=t.sent).isJwPlayer){t.next=23;break}if(i=document.querySelector(".jwplayer"),!on||i){t.next=20;break}return Jn(),Zn(chrome.i18n.getMessage("video_not_detected")),t.abrupt("return",!1);case 20:st(i),t.next=31;break;case 23:if(a=null===(c=Ke)||void 0===c?void 0:c.currentMainVideo,!on||a){t.next=26;break}return t.abrupt("return",!1);case 26:if(a){t.next=31;break}return Jn(),Zn(chrome.i18n.getMessage("video_not_detected")),t.abrupt("return",!1);case 31:if(en=o.isJwPlayer?i.parentElement:Ke.currentMainVideoWrapper,documentPictureInPicture.window){t.next=58;break}return u=qn(a||i,o.isJwPlayer),s=u.width,l=u.height,t.prev=35,t.next=38,documentPictureInPicture.requestWindow({width:s,height:l});case 38:return An(Je=t.sent,o.isJwPlayer),t.next=42,Nn(Je,o);case 42:Bn(Je,o.isJwPlayer),t.next=56;break;case 45:return t.prev=45,t.t0=t.catch(35),Je=null,t.t1=Kn,t.next=52,$n(t.t0);case 52:return t.t2=t.sent,t.t3=document.body,(0,t.t1)(t.t2,0,t.t3),t.abrupt("return",!1);case 56:t.next=59;break;case 58:Je=documentPictureInPicture.window;case 59:return o.isJwPlayer?tn.append(i):Rn(a),t.next=62,fn();case 62:return t.next=64,Ln(Je,tn);case 64:return Kn(chrome.i18n.getMessage("playing_in_pip_mode"),0,en),on=!1,t.abrupt("return",!0);case 67:case"end":return t.stop()}}),t,null,[[35,45]])}))),In.apply(this,arguments)}function qn(t,e){var n=Math.floor(window.screen.width/window.devicePixelRatio*.4),r=e?t.clientWidth/t.clientHeight:(t.videoWidth||t.clientWidth)/(t.videoHeight||t.clientHeight),o=e?t.clientWidth:t.videoWidth||t.clientWidth,i=e?t.clientHeight:t.videoHeight||t.clientHeight,a=Vn(o,i),c=localStorage.getItem("pipPortraitWidth"),u=localStorage.getItem("pipLandscapeWidth"),s=Math.min(n,a?430:480),l=(a?c:u)||Math.min(o,s)||(a?430:480);return{width:l,height:l/r||(a?930:270)}}function An(t,e){t.addEventListener("pagehide",(function(n){rn=!0;try{if(e)lt(n.target.querySelector(".jwplayer"));else Ke.restoreVideoPosition(n.target.querySelector("video")),hn();Jn()}catch(t){}finally{t=null,fe((function(){gt()}),500)}}))}function Nn(t,e){return Fn.apply(this,arguments)}function Fn(){return Fn=Ye(Ue().mark((function t(e,n){var r,o,i;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(t){return new Promise((function(n){if(e.document.querySelector('link[href="'.concat(t,'"]')))n();else{var r=e.document.createElement("link");r.rel="stylesheet",r.href=t,r.onload=n,e.document.head.appendChild(r)}}))},o=[],n.isJwPlayer&&o.push(r(chrome.runtime.getURL("css/jwplayer.css"))),Array.isArray(n.localCss)&&n.localCss.length>0&&o.push.apply(o,Ae(n.localCss.map((function(t){return r(chrome.runtime.getURL(t))})))),n.styles&&"string"==typeof n.styles&&""!==n.styles.trim()&&((i=e.document.createElement("style")).textContent=n.styles.trim(),e.document.head.appendChild(i)),t.next=7,Promise.all(o);case 7:case"end":return t.stop()}}),t)}))),Fn.apply(this,arguments)}function Bn(t,e){!function(t){var e=t.document.querySelector(".loading-container");if(!e){(e=t.document.createElement("div")).classList.add("loading-container");var n=t.document.createElement("div");n.classList.add("loading-spinner"),e.append(n),t.document.body.append(e)}}(t),e||function(t){var e=t.document.querySelector(".icon-play-container");if(!e){(e=t.document.createElement("div")).classList.add("icon-play-container"),e.innerHTML=Te,t.document.body.appendChild(e),ct(e,"click",(function(t){var e=Sn();null==e||e.play()}))}}(t),function(t){tn=t.document.querySelector(".video-container"),tn||((tn=t.document.createElement("div")).classList.add("video-container"),t.document.body.append(tn))}(t),function(t){var e=tn.querySelector(".video-title");e||((e=t.document.createElement("div")).classList.add("video-title"),tn.appendChild(e));e.textContent=document.title.substring(0,100)||""}(t),function(t){var e=t.document.querySelector(".player-shortcuts-container");if(!e){(e=t.document.createElement("div")).classList.add("player-shortcuts-container","hidden");var n=t.document.createElement("button");n.classList.add("close-btn"),n.innerHTML="&times;",n.addEventListener("click",(function(){e.classList.add("hidden")}));var r=t.document.createElement("div");r.classList.add("shortcuts"),[{keys:"Space / k",description:chrome.i18n.getMessage("shortcut_play_pause")},{keys:"Left/Right Arrow",description:chrome.i18n.getMessage("shortcut_fast_forward_rewind_5")},{keys:"J / L",description:chrome.i18n.getMessage("shortcut_fast_forward_rewind_10")},{keys:"Up/Down Arrow",description:chrome.i18n.getMessage("shortcut_adjust_volume")},{keys:"M",description:chrome.i18n.getMessage("shortcut_mute_unmute")},{keys:"Mouse Wheel",description:chrome.i18n.getMessage("shortcut_fast_forward_rewind")},{keys:"Shift+N",description:chrome.i18n.getMessage("shortcut_next_video")},{keys:"Shift+P",description:chrome.i18n.getMessage("shortcut_previous_video")},{keys:"> / <",description:chrome.i18n.getMessage("shortcut_playback_speed")},{keys:"B",description:chrome.i18n.getMessage("shortcut_toggle_danmaku")},{keys:"C",description:chrome.i18n.getMessage("shortcut_toggle_captions")},{keys:"T",description:chrome.i18n.getMessage("shortcut_fit_to_screen")},{keys:"Q",description:chrome.i18n.getMessage("shortcut_toggle_hide_show")},{keys:"F",description:chrome.i18n.getMessage("shortcut_toggle_fullscreen")},{keys:"Home / End",description:chrome.i18n.getMessage("shortcut_seek_video_start_end")},{keys:"0-9",description:chrome.i18n.getMessage("shortcut_seek_percentage")},{keys:"Alt+P",description:chrome.i18n.getMessage("shortcut_enter_pip")},{keys:"Esc",description:chrome.i18n.getMessage("shortcut_exit_pip")}].forEach((function(e){var n=t.document.createElement("div");n.classList.add("shortcut");var o=t.document.createElement("div");o.classList.add("keys"),o.textContent=e.keys;var i=t.document.createElement("div");i.classList.add("description"),i.textContent=e.description,n.append(o,i),r.append(n)})),e.append(n,r),t.document.body.appendChild(e),e.addEventListener("wheel",(function(t){t.stopPropagation()}),{passive:!1})}}(t)}function Rn(t){var e=tn.querySelector("video,smp-toucan-player");e&&e.remove(),t||(t=document.querySelector("video,smp-toucan-player")),t&&tn.append(t)}function Hn(){return Wn.apply(this,arguments)}function Wn(){return Wn=Ye(Ue().mark((function t(){var e,n,r;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(),t.next=3,ln();case 3:e=t.sent,rn=!0,documentPictureInPicture.window&&(n=documentPictureInPicture.window.document,(r=e.isJwPlayer?n.querySelector(".jwplayer"):n.querySelector("video"))&&(e.isJwPlayer?lt(r):Ke.restoreVideoPosition(r)),hn(),Je=null,fe(gt,500),documentPictureInPicture.window.close());case 6:case"end":return t.stop()}}),t)}))),Wn.apply(this,arguments)}function Dn(){return Gn.apply(this,arguments)}function Gn(){return Gn=Ye(Ue().mark((function t(){var e,n,r=arguments;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=r.length>0&&void 0!==r[0]&&r[0])||document.querySelector("video")){t.next=3;break}return t.abrupt("return",!1);case 3:if(lr.advancedPipEnable){t.next=5;break}return t.abrupt("return",p());case 5:if(rn=!1,!e){t.next=13;break}return t.next=9,mt();case 9:if(!(n=t.sent)){t.next=13;break}return t.next=13,new Promise((function(t){var e=Date.now(),r=function(){4===n.readyState||Date.now()-e>=1e4?(navigator.userActivation.isActive||(n.muted=!0),xt(n),Ke.currentMainVideo=n,t()):setTimeout(r,100)};r()}));case 13:return t.abrupt("return",Tn());case 14:case"end":return t.stop()}}),t)}))),Gn.apply(this,arguments)}function zn(){return Un.apply(this,arguments)}function Un(){return(Un=Ye(Ue().mark((function t(){var e;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=Ke.currentMainVideo)&&!e.paused&&!e.muted&&0!==e.volume){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,Dn();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Zn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n="toast-".concat(Date.now()),r=document.createElement("div");r.id=n,r.style.cssText="\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background-color: rgba(0, 0, 0, 0.75);\n        color: white;\n        padding: 25px;\n        border-radius: 5px;\n        z-index: 10000;\n        text-align: center;\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity 0.5s ease;\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;\n        font-size: 14px;\n    ",r.textContent=t,document.body.appendChild(r),r.offsetHeight,requestAnimationFrame((function(){r.style.opacity="1"})),setTimeout((function(){var t=document.getElementById(n);t&&(t.style.opacity="0",t.addEventListener("transitionend",(function e(){document.body.contains(t)&&document.body.removeChild(t),t.removeEventListener("transitionend",e)})))}),e)},Yn=null,Kn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Yn&&Yn.remove(),t){(Yn=document.createElement("div")).className="placeholder-overlay";var r="overlay-".concat(Date.now());Yn.id=r;var o=document.createElement("div");o.className="placeholder-wrapper",o.addEventListener("click",(function(t){t.stopPropagation()}));var i=document.createElement("button");i.className="placeholder-close-btn",i.innerHTML="&times;",i.addEventListener("click",(function(t){t.stopPropagation(),Yn.remove(),Yn=null}));var a=document.createElement("div");a.className="placeholder-content",o.append(i,a),Yn.appendChild(o),Yn.style.cssText="\n        position: absolute;\n        inset: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 9999;\n        pointer-events: none;\n    ",o.style.cssText="\n        position: relative;\n        padding: 2rem;\n        border-radius: 0.5rem;\n        text-align: center;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        background-color: rgba(0, 0, 0, 0.8);\n        max-width: 80%;\n        max-height: 80%;\n        overflow: auto;\n        pointer-events: auto;\n    ",a.style.cssText="\n        color: white;\n        font-size: 1rem;\n        line-height: 1.5;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n    ",i.style.cssText="\n        position: absolute;\n        top: 0.5rem;\n        right: 0.5rem;\n        width: 2rem;\n        height: 2rem;\n        border: none;\n        background-color: transparent;\n        color: white;\n        font-size: 1.5rem;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 0;\n        border-radius: 50%;\n        transition: background-color 0.3s;\n        pointer-events: auto;\n    ",i.addEventListener("mouseover",(function(){i.style.backgroundColor="rgba(255, 255, 255, 0.2)"})),i.addEventListener("mouseout",(function(){i.style.backgroundColor="transparent"}));var c,u=n;if(!u)for(u=(null===(c=Ke)||void 0===c?void 0:c.currentMainVideoWrapper)||document.body;u&&u.offsetHeight<=0;)u=u.parentElement;return u&&u.appendChild(Yn),t?("string"==typeof t?a.textContent=t:a.appendChild(t),Yn.style.display="flex"):Yn.style.display="none",Yn.style.zIndex="2147483647",e>0&&setTimeout((function(){Yn&&Yn.id===r&&(Yn.remove(),Yn=null)}),e),!0}},Jn=function(){var t=document.querySelector(".placeholder-overlay");t&&t.remove()};function $n(t){return Xn.apply(this,arguments)}function Xn(){return Xn=Ye(Ue().mark((function t(e){var n,r,o,i,a,c,u,s,l,d,f,h,v,m,y,g,b,w;return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w=function(t){if(t.includes("youtube.com")){var e=new URL(t);return e.searchParams.set("autoplay","1"),e.toString()}return t},b=function(){if(window!==window.top)return w(window.location.href);var t=Array.from(document.getElementsByTagName("iframe"));if(0===t.length)return null;var e=t.find((function(t){try{var e;return null===(e=t.contentDocument)||void 0===e?void 0:e.querySelector("video")}catch(t){return!1}}));if(e)return w(e.src);var n=t.reduce((function(t,e){return t.clientWidth*t.clientHeight>e.clientWidth*e.clientHeight?t:e}));return w(n.src)},n=location.hostname,(r=document.createElement("div")).style.cssText="\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        color: white;\n        font-size: 16px;\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;\n    ",(o=document.createElement("p")).textContent=e.message||"An error occurred",o.style.cssText="\n        font-size: 16px;\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;\n    ",e.message&&e.message.includes("Document PiP requires user activation")&&(o.textContent=chrome.i18n.getMessage("pip_user_activation_required"),(i=document.createElement("button")).textContent=chrome.i18n.getMessage("retry_action"),i.style.cssText="\n            margin-top: 10px;\n            padding: 8px 16px;\n            background-color: #4CAF50;\n            color: white;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n            font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;\n        ",i.addEventListener("click",(function(){Dn(!0)})),r.appendChild(i)),!e.message||!e.message.includes("only allowed from a top-level browsing context")){t.next=51;break}if(!(a=b())){t.next=26;break}return t.next=14,E("get_site_configs",{url:a});case 14:if(u=t.sent,"use_standard_pip"!==(null==(s=null===(c=u.data)||void 0===c?void 0:c.siteConfigs)?void 0:s.pipRestrictionAction)){t.next=21;break}return p(),t.abrupt("return",null);case 21:if("open_in_new_tab"!==(null==s?void 0:s.pipRestrictionAction)){t.next=26;break}return kt(Ke.currentMainVideo),t.next=25,E("add_new_tab",{url:a,enterPictureInPicture:!0});case 25:return t.abrupt("return",null);case 26:o.textContent=chrome.i18n.getMessage("pip_window_restriction"),l=function(t,e,n){var r=document.createElement("button");return r.textContent=t,r.style.cssText="\n                margin-top: 10px;\n                padding: 8px 16px;\n                background-color: ".concat(e,";\n                color: white;\n                border: none;\n                border-radius: 4px;\n                cursor: pointer;\n                font-size: 14px;\n                font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;\n            "),r.addEventListener("click",n),r},(d=document.createElement("div")).style.cssText="\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            gap: 10px;\n            margin-top: 10px;\n        ",(f=document.createElement("div")).style.cssText="\n            display: flex;\n            justify-content: center;\n            gap: 10px;\n        ",h=l(chrome.i18n.getMessage("use_standard_pip"),"#4CAF50",(function(){xt(Ke.currentMainVideo),p(),y.checked&&E("update_site_config",{hostname:n,config:{pipRestrictionAction:"use_standard_pip"}})})),f.appendChild(h),a&&(v=l(chrome.i18n.getMessage("open_in_new_tab"),"#008CBA",(function(){kt(Ke.currentMainVideo),E("add_new_tab",{url:a,enterPictureInPicture:!0}),y.checked&&E("update_site_config",{hostname:n,config:{pipRestrictionAction:"open_in_new_tab"}})})),f.appendChild(v)),d.appendChild(f),(m=document.createElement("div")).style.cssText="\n            display: flex;\n            align-items: center;\n            margin-top: 10px;\n        ",(y=document.createElement("input")).type="checkbox",y.id="rememberChoice",y.checked=!1,y.style.marginRight="5px",(g=document.createElement("label")).htmlFor="rememberChoice",g.textContent=chrome.i18n.getMessage("remember_site_pip_restriction_choice"),g.style.fontSize="12px",m.appendChild(y),m.appendChild(g),d.appendChild(m),r.appendChild(d);case 51:return r.appendChild(o),t.abrupt("return",r);case 53:case"end":return t.stop()}}),t)}))),Xn.apply(this,arguments)}var Qn=function(){if(null==lr||!lr.subtitleDetection)return!1;for(var t=document.querySelectorAll("video,smp-toucan-player"),e=new Set(["A","IMG","SVG","TITLE","BUTTON","FOOTER","NAV","ASIDE","LINK","CODE","BLOCKQUOTE","PRE","SCRIPT","STYLE","TEXTAREA","G","NOSCRIPT","BASE","KBD","WBR","RT","RP","META","MATH","TTS-SENTENCE","AIO-CODE","RELIN-TARGET"]),n=0,r=["text-track-wrapper","text-track","player-timedtext","caption","subtitle"];n<r.length;n++){var o,i=r[n],a=De(t);try{for(a.s();!(o=a.n()).done;){var c=o.value,u=null;if(u=tr(c,[i],e,c))return u;for(var s=c;s;){if(u=er(s,[i],e,c))return u;s=s.parentElement}}}catch(t){a.e(t)}finally{a.f()}}return null},tr=function(t,e,n,r){if(n.has(t.tagName.toUpperCase()))return null;var o=nr(t,e,r);if(o)return o;var i,a=De(t.children);try{for(a.s();!(i=a.n()).done;){var c=i.value,u=tr(c,e,n,r);if(u)return u}}catch(t){a.e(t)}finally{a.f()}return null},er=function(t,e,n,r){for(var o=t.nextElementSibling;o;){if(!n.has(o.tagName.toUpperCase())){var i=tr(o,e,n,r);if(i)return i}o=o.nextElementSibling}for(o=t.previousElementSibling;o;){if(!n.has(o.tagName.toUpperCase())){var a=tr(o,e,n,r);if(a)return a}o=o.previousElementSibling}return null},nr=function(t,e,n){try{var r=t.id,o=t.className,i=t.dataset;if(t.querySelector("img, svg"))return null;var a=e.map((function(t){return t.toLowerCase()}));if(r&&a.some((function(t){return r.toLowerCase().includes(t)})))return rr(t,r,null,null,n);var c=Object.values(i);return c.length>0&&a.some((function(t){return c.some((function(e){return"string"==typeof e&&e.toLowerCase().includes(t)}))}))?rr(t,null,null,i,n):o&&a.some((function(t){return o.toLowerCase().includes(t)}))?rr(t,null,o,null,n):null}catch(t){return null}},rr=function(t,e,n,r,o){for(var i=or(e,n,r),a=or(t.parentElement.id,t.parentElement.className,t.parentElement.dataset),c=or(o.parentElement.id,o.parentElement.className,o.parentElement.dataset),u=t;u.children.length>0;)u=u.children[0];var s=window.getComputedStyle(u),l={display:s.display,textAlign:s.textAlign,padding:s.padding,borderRadius:s.borderRadius,direction:s.direction,opacity:s.opacity,color:s.color,background:s.background,backgroundColor:s.backgroundColor},d=t.getBoundingClientRect(),f=o.getBoundingClientRect();return!(d.right<f.left||d.left>f.right||d.bottom<f.top||d.top>f.bottom)?{caption:i,captionParent:a,videoParent:c,captionStyle:l,captionRect:d,videoRect:f}:null},or=function(t,e,n){var r=[];if(t&&/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(t)&&r.push("#".concat(CSS.escape(t))),n)for(var o=0,i=Object.entries(n);o<i.length;o++){var a=Ne(i[o],2),c=a[0],u=a[1];u&&/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(c)&&r.push("[data-".concat(CSS.escape(c),'="').concat(CSS.escape(u),'"]'))}if("string"==typeof e){var s=e.split(" ").filter((function(t){return/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(t)})).map((function(t){return".".concat(CSS.escape(t))})).join("");s&&r.push(s)}return r.join("")};function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function ar(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ar=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:_(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ir(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ir(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new L(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function cr(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ur(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){cr(i,r,o,a,c,"next",t)}function c(t){cr(i,r,o,a,c,"throw",t)}a(void 0)}))}}var sr,lr={},dr={},fr={},pr=!1,hr=null,vr=(new Map,function(){var t=ur(ar().mark((function t(){return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mr();case 2:fe(Nt,1e3);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),mr=function(){var t=ur(ar().mark((function t(){var e,n,r,o,i,c,u,s;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E("get_settings");case 2:return null!=(o=t.sent)&&o.success&&null!==(e=o.data)&&void 0!==e&&e.settings&&(i=o.data,lr=i.settings,dr=i.siteConfigs,fr=i.tab,hr=i.frameId,dr&&he()),(null==o?void 0:o.success)&&((null===(n=o.data)||void 0===n||null===(n=n.tabConfig)||void 0===n?void 0:n.enterPictureInPicture)||(null===(r=dr)||void 0===r?void 0:r.autoEnterPictureInPicture))&&window.addEventListener("load",(function(){setTimeout((function(){var t;null!==(t=lr)&&void 0!==t&&t.advancedPipEnable?Dn(!0):p()}),1e3)})),t.next=9,E("is_sidepanel_opened");case 9:c=t.sent,pr=(null==c?void 0:c.success)&&!0===c.data.is_sidepanel_opened,null!=c&&c.data&&0===hr&&(null!==(u=lr)&&void 0!==u&&u.floatBall&&(c.data.is_sidepanel_opened?j():M()),null!==(s=lr)&&void 0!==s&&s.sidebarEnabled&&(c.data.is_sidepanel_opened?xe():we())),Ke||((Ke=new a).on("initialized",Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(gt(),!Ke.currentMainVideo){t.next=6;break}return t.next=5,ln();case 5:window.postMessage({action:"disable_page_hide_event"},location.origin);case 6:case"end":return t.stop()}}),t)})))),Ke.init(),Ke.on("mainVideoChanged",Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(gt(),!Ke.currentMainVideo){t.next=5;break}return t.next=4,ln();case 4:window.postMessage({action:"disable_page_hide_event"},location.origin);case 5:Ke.currentMainVideo&&documentPictureInPicture.window&&!rn&&(on=!1,setTimeout(Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tn();case 2:case"end":return t.stop()}}),t)}))),500));case 6:case"end":return t.stop()}}),t)})))),Ke.on("mainVideoPlay",(function(){setTimeout(Ye(Ue().mark((function t(){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ke.currentMainVideo||!documentPictureInPicture.window||rn){t.next=4;break}return on=!1,t.next=4,Tn();case 4:case"end":return t.stop()}}),t)}))),500)})),Ke.on("mainVideoProgress",(function(t){t.video;var e=t.percent;t.readyState<3&&documentPictureInPicture.window&&gn(!0,"Loading ".concat(e.toFixed(2),"%"))})),Ke.on("mainVideoUpdated",(function(t,e){bt(e)})),document.addEventListener("fullscreenchange",(function(t){E(document.fullscreenElement?"page_enter_fullscreen":"page_exit_fullscreen")}),!1),window.addEventListener("enterpictureinpicture",(function(t){gt()})),window.addEventListener("leavepictureinpicture",(function(t){t.target.scrollIntoViewIfNeeded(),gt()})));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),yr=function(){var t=ur(ar().mark((function t(e,n,r){var o,i,a,c,u,s,l,d;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=e.action,t.next="update_setting"===t.t0?4:"update_site_config"===t.t0?8:"tabUpdated"===t.t0?11:"tab_url_updated"===t.t0?13:"save_tab_session"===t.t0?16:"clear_browsing_data"===t.t0?17:"play_video"===t.t0?19:"pause_video"===t.t0?21:"video_jump_to_time"===t.t0?23:"volume_change"===t.t0?25:"playback_rate_change"===t.t0?27:"video_switch_mute"===t.t0?29:"page_keep_alive"===t.t0?31:"enterPictureInPicture"===t.t0||"playing_video_enterPictureInPicture"===t.t0?33:"exitPictureInPicture"===t.t0||"playing_video_exitPictureInPicture"===t.t0?35:"openPopup"===t.t0?37:"sidepanel_opened"===t.t0?40:"sidepanel_closed"===t.t0?45:"scroll_to_top"===t.t0?48:"scroll_to_bottom"===t.t0?50:"redirect_url"===t.t0?52:54;break;case 4:return lr[e.data.key]=e.data.value,"floatBall"===e.data.key&&(null!=lr&&lr.floatBall?pr?j():M():j()),["theme","sidebarEnabled","sidebarPosition"].includes(e.data.key)&&(xe(),we()),t.abrupt("break",55);case 8:return dr[e.data.key]=e.data.value,he(),t.abrupt("break",55);case 11:return pe(e.data.tabId,e.data.changeInfo,e.data.tab),t.abrupt("break",55);case 13:return t.next=15,vr();case 15:return t.abrupt("break",55);case 16:return t.abrupt("return",{localStorageItems:v(),sessionStorageItems:m()});case 17:return localStorage.clear(),sessionStorage.clear(),t.abrupt("break",55);case 19:return xt(),t.abrupt("break",55);case 21:return kt(),t.abrupt("break",55);case 23:return Et(e.data.value),t.abrupt("break",55);case 25:return St(e.data.value),t.abrupt("break",55);case 27:return Lt(e.data.value),t.abrupt("break",55);case 29:return _t(),t.abrupt("break",55);case 31:return window.postMessage({action:"page_keep_alive"},location.origin),t.abrupt("break",55);case 33:return null!==(o=lr)&&void 0!==o&&o.advancedPipEnable?"enterPictureInPicture"===e.action?Dn(!0):zn():p(),t.abrupt("break",55);case 35:return null!==(i=lr)&&void 0!==i&&i.advancedPipEnable?Hn():f(),t.abrupt("break",55);case 37:return t.next=39,E("update_setting",{key:"clickExtensionIconAction",value:"openPopup"});case 39:return t.abrupt("break",55);case 40:if((null===(a=e.data)||void 0===a?void 0:a.name)==="sidepanel_".concat(null===(c=fr)||void 0===c?void 0:c.windowId)&&(j(),xe(),pr=!0),lr){t.next=44;break}return t.next=44,vr();case 44:return t.abrupt("break",55);case 45:return pr=!1,(null===(u=e.data)||void 0===u?void 0:u.name)==="sidepanel_".concat(null===(s=fr)||void 0===s?void 0:s.windowId)&&0===hr&&(null!==(l=lr)&&void 0!==l&&l.floatBall&&M(),null!==(d=lr)&&void 0!==d&&d.sidebarEnabled&&we()),t.abrupt("break",55);case 48:return h=void 0,null===(h=It)||void 0===h||h.scrollTo({top:0,left:0,behavior:"smooth"}),t.abrupt("break",55);case 50:return n=void 0,null===(n=It)||void 0===n||n.scrollTo({top:It.scrollHeight,left:0,behavior:"smooth"}),t.abrupt("break",55);case 52:return window.location.href=e.data.url,t.abrupt("break",55);case 54:throw new Error("Unknown action");case 55:r({success:!0}),t.next=62;break;case 58:t.prev=58,t.t1=t.catch(0),r({success:!1,error:t.t1.message});case 62:case"end":return t.stop()}var n,h}),t,null,[[0,58]])})));return function(e,n,r){return t.apply(this,arguments)}}(),gr=function(){var t=ur(ar().mark((function t(){return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E("open_sidepanel");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),br=function(){vr(),chrome.runtime.onMessage.addListener((function(t,e,n){return yr(t,e,n),!0}))},wr=["googleads.g.doubleclick.net","s1.hdslb.com","oapi.dingtalk.com","login.dingtalk.com","imasdk.googleapis.com","acdn.adnxs.com","pos.baidu.com","js-sec.indexww.com","g.alicdn.com","ads.pubmatic.com","challenges.cloudflare.com","accounts.google.com","images-na.ssl-images-amazon.com","tpc.googlesyndication.com","js.stripe.com","acdn.adnxs-simple.com","s.union.360.cn","s.amazon-adsystem.com","www.recaptcha.net","s7.addthis.com","z.moatads.com","https://www.marketwatch.com/static_html/daa-min.html","tr.snapchat.com","ct.pinterest.com","*.moatads.com","secure-us.imrworldwide.com","static.noeyeon.click","widgets.outbrain.com","www.dianomi.com/smartads.epl","secure-assets.rubiconproject.com","eus.rubiconproject.com","eus.rubiconproject.com","i.liadm.com","eb2.3lift.com","googleads.g.doubleclick.net","https://www.google.com/recaptcha/*","ad.doubanio.com","datawrapper.dwcdn.net","*://*/*\\.svg","file://*/*\\.xml","file://*/*\\.svg"];sr=window.location.href,wr.some((function(t){return new RegExp(t.replace(/\*/g,".*")).test(sr)}))||(window.addEventListener("DOMContentLoaded",br),window.addEventListener("pageshow",(function(t){t.persisted?br():vr()})))})();
//# sourceMappingURL=contentScript.js.map